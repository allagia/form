{"version":3,"sources":["webpack:///./js/vendors/imask.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object"],"names":["global","factory","exports","define","commonjsGlobal","globalThis","window","self","createCommonjsModule","fn","module","O","check","it","Math","global_1","Function","fails","exec","error","descriptors","Object","defineProperty","get","a","nativePropertyIsEnumerable","propertyIsEnumerable","getOwnPropertyDescriptor","NASHORN_BUG","call","f","V","descriptor","enumerable","objectPropertyIsEnumerable","createPropertyDescriptor","bitmap","value","configurable","writable","toString","classofRaw","slice","split","indexedObject","requireObjectCoercible","undefined","TypeError","toIndexedObject","isObject","toPrimitive","input","PREFERRED_STRING","val","valueOf","hasOwnProperty","has","key","document$1","document","EXISTS","createElement","documentCreateElement","ie8DomDefine","nativeGetOwnPropertyDescriptor","f$1","P","objectGetOwnPropertyDescriptor","anObject","String","nativeDefineProperty","f$2","Attributes","objectDefineProperty","hide","object","setGlobal","shared","SHARED","store","push","version","mode","copyright","functionToString","WeakMap","nativeWeakMap","test","id","postfix","random","uid","keys","sharedKey","hiddenKeys","WeakMap$1","set","has$1","enforce","getterFor","TYPE","state","type","wmget","wmhas","wmset","metadata","STATE","internalState","redefine","getInternalState","enforceInternalState","TEMPLATE","options","unsafe","simple","noTargetGet","source","join","prototype","path","aFunction","variable","getBuiltIn","namespace","method","arguments","length","ceil","floor","toInteger","argument","isNaN","min","toLength","max","min$1","toAbsoluteIndex","index","integer","createMethod","IS_INCLUDES","$this","el","fromIndex","arrayIncludes","includes","indexOf","objectKeysInternal","names","i","result","enumBugKeys","hiddenKeys$1","concat","f$3","getOwnPropertyNames","objectGetOwnPropertyNames","f$4","getOwnPropertySymbols","objectGetOwnPropertySymbols","ownKeys","copyConstructorProperties","target","replacement","isForced","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","isForced_1","getOwnPropertyDescriptor$1","_export","TARGET","GLOBAL","STATIC","stat","FORCED","targetProperty","sourceProperty","forced","sham","objectKeys","toObject","nativeAssign","assign","objectAssign","A","B","symbol","Symbol","alphabet","forEach","chr","T","argumentsLength","S","j","stringRepeat","repeat","count","str","n","Infinity","RangeError","ceil$1","createMethod$1","IS_END","maxLength","fillString","stringLength","fillStr","intMaxLength","fillLen","stringFiller","stringPad","start","end","userAgent","webkitStringPadBug","$padEnd","proto","padEnd","$padStart","padStart","_typeof","obj","iterator","constructor","_classCallCheck","instance","Constructor","_defineProperties","props","_createClass","protoProps","staticProps","_defineProperty","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_superPropBase","property","_get","receiver","Reflect","base","desc","set$1","_set","isStrict","s","Error","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","_arr","_n","_d","_e","_i","_s","next","done","err","isString","DIRECTION","NONE","LEFT","FORCE_LEFT","RIGHT","FORCE_RIGHT","forceDirection","direction","escapeRegExp","objectIncludes","b","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","g","ActionDetails","cursorPos","oldValue","oldSelection","startChangePos","substr","insertedCount","removedCount","substring","ChangeDetails","details","inserted","rawInserted","skip","tailShift","aggregate","ContinuousTailDetails","from","stop","extend","tail","appendTo","masked","append","_appendPlaceholder","shiftBefore","pos","shiftChar","Masked","opts","_value","_update","isInitialized","updateOptions","withValueRefresh","bind","reset","resolve","doCommit","nearestInputPos","extractInput","fromPos","toPos","extractTail","appendTail","_appendCharRaw","ch","flags","doPrepare","_appendChar","checkTail","consistentState","consistentTail","appended","doValidate","beforeTailState","overwrite","tailDetails","_beforeTailState","ci","remove","_refreshing","unmasked","unmaskedValue","ret","prepare","validate","parent","commit","splice","deleteCount","removeDirection","tailPos","changeDetails","raw","maskedClass","mask","IMask","MaskedRegExp","MaskedPattern","MaskedDate","Number","MaskedNumber","MaskedDynamic","MaskedFunction","console","warn","createMask","MaskedClass","DEFAULT_INPUT_DEFINITIONS","PatternInputDefinition","blockOpts","_isFilled","isOptional","lazy","placeholderChar","Boolean","_this$masked","apply","_this$masked2","_this$masked3","minPos","maxPos","boundPos","isComplete","_this$masked4","_this$parent","PatternFixedDefinition","_isRawInput","isResolved","isUnmasking","ChunksTailDetails","chunks","map","tailChunk","lastChunk","extendLast","firstTailChunk","shift","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","_stops","_blocks","remainChars","chunkShiftPos","c","cstate","_Masked","definitions","DEFAULTS","_rebuildMask","_this","defs","_maskedBlocks","pattern","unmaskingBlock","optionalBlock","blocks","_ret","bNames","filter","bName","sort","maskedBlock","char","_isInput","STOP_CHAR","ESCAPE_CHAR","def","blockIter","bi","_block","blockDetails","_this2","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","_blockStartPos","_","stopBefore","si","toBlockIndex","_this3","startBlockIter","startBlockIndex","endBlockIndex","args","bDetails","accVal","_block2","blockStartPos","offset","reduce","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","beginBlockData","beginBlockOffset","beginBlockIndex","beginBlock","beginBlockCursorPos","cursorAtRight","cursorAtLeft","searchBlockIndex","blockIndexAtLeft","blockAtLeft","blockInputPos","firstInputAtRight","blockAtRight","_blockInputPos","_bi","_block3","_blockInputPos2","firstFilledBlockIndexAtRight","_bi2","filledBlock","_blockInputPos3","firstFilledInputBlockIndex","firstEmptyInputBlockIndex","_bi3","_block4","_blockInputPos4","_bi4","_block5","_blockInputPos5","blockAlignedPos","isInput","_bi5","_block6","_blockInputPos6","firstInputBlockAlignedIndex","firstInputBlockAlignedPos","_bi6","_block7","_blockInputPos7","_bi7","_block8","_blockInputPos8","_bi8","_block9","_blockInputPos9","alignedPos","name","maskedBlocks","_this4","indices","gi","maskedState","every","InputDefinition","FixedDefinition","block","MaskedRange","_MaskedPattern","to","fromStr","toStr","sameCharsCount","boundaries","minstr","maxstr","_ref","match","_ref2","placeholder","num","autofix","prepStr","nextVal","_this$boundaries","_this$boundaries2","_get2","firstNonZero","search","_matchFrom","_this$boundaries3","_this$boundaries4","_len","_key","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","d","getDate","bk","date","isDateExist","format","parse","day","month","year","_str$split","_str$split2","MaskElement","select","selectionStart","selectionEnd","_unsafeSelect","e","bindEvents","handlers","unbindEvents","_unsafeSelectionStart","_unsafeSelectionEnd","HTMLMaskElement","_MaskElement","_handlers","setSelectionRange","event","_toggleEventHandler","EVENTS_MAP","handler","removeEventListener","addEventListener","activeElement","selectionChange","drop","click","focus","InputMask","_listeners","_unmaskedValue","_saveSelection","_onInput","_onChange","_onDrop","_onFocus","alignCursor","alignCursorFriendly","_bindEvents","updateValue","maskEquals","_unbindEvents","_fireEvent","ev","listeners","l","_selection","updateControl","newUnmaskedValue","newValue","isChanged","_fireChangeEvents","restOpts","updateMask","updateOpts","updateCursor","_delayUpdateCursor","_abortUpdateCursor","_changingCursorPos","_cursorChanging","setTimeout","clearTimeout","on","off","hIndex","oldRawValue","rawInputValue","removed","preventDefault","stopPropagation","destroy","typedValue","isActive","MaskedEnum","some","_updateRegExps","allowNegative","midInput","mid","scale","radix","_numberRegExpInput","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","_removeThousandsSeparators","_insertThousandsSeparators","parts","_separatorsCount","extendOnSeparators","_separatorsCountFromSlice","_this$_adjustRangeWit","_adjustRangeWithSeparators","_this$_adjustRangeWit2","prevBeforeTailValue","prevBeforeTailSeparatorsCount","appendDetails","beforeTailValue","beforeTailSeparatorsCount","_findSeparatorAround","searchFrom","separatorPos","separatorAroundFromPos","separatorAroundToPos","_this$_adjustRangeWit3","_this$_adjustRangeWit4","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","regexp","valid","number","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","signed","currentMask","compiledMasks","_applyDispatch","_this$currentMask","prevValueBeforeTail","inputValue","insertValue","_rawInputValue","tailValue","prevMask","prevMaskState","doDispatch","dispatch","_this$currentMask2","_this$currentMask3","_this$currentMask4","_this$currentMask5","_get3","_len2","_key2","_this$currentMask6","_get4","_len3","_key3","currentMaskRef","mi","inputs","weight","i1","i2"],"mappings":"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","file":"./js/vendor.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n      (global = global || self, factory(global.IMask = {}));\n}(this, function (exports) {\n  'use strict';\n\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n  function createCommonjsModule(fn, module) {\n    return module = {exports: {}}, fn(module, module.exports), module.exports;\n  }\n\n  var O = 'object';\n\n  var check = function (it) {\n    return it && it.Math == Math && it;\n  }; // https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\n\n  var global_1 = // eslint-disable-next-line no-undef\n    check(typeof globalThis == O && globalThis) || check(typeof window == O && window) || check(typeof self == O && self) || check(typeof commonjsGlobal == O && commonjsGlobal) || // eslint-disable-next-line no-new-func\n    Function('return this')();\n\n  var fails = function (exec) {\n    try {\n      return !!exec();\n    } catch (error) {\n      return true;\n    }\n  };\n\n  // Thank's IE8 for his funny defineProperty\n\n\n  var descriptors = !fails(function () {\n    return Object.defineProperty({}, 'a', {\n      get: function () {\n        return 7;\n      },\n    }).a != 7;\n  });\n\n  var nativePropertyIsEnumerable = {}.propertyIsEnumerable;\n  var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor; // Nashorn ~ JDK8 bug\n\n  var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({\n    1: 2,\n  }, 1); // `Object.prototype.propertyIsEnumerable` method implementation\n  // https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\n\n  var f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n    var descriptor = getOwnPropertyDescriptor(this, V);\n    return !!descriptor && descriptor.enumerable;\n  } : nativePropertyIsEnumerable;\n\n  var objectPropertyIsEnumerable = {\n    f: f,\n  };\n\n  var createPropertyDescriptor = function (bitmap, value) {\n    return {\n      enumerable: !(bitmap & 1),\n      configurable: !(bitmap & 2),\n      writable: !(bitmap & 4),\n      value: value,\n    };\n  };\n\n  var toString = {}.toString;\n\n  var classofRaw = function (it) {\n    return toString.call(it).slice(8, -1);\n  };\n\n  var split = ''.split; // fallback for non-array-like ES3 and non-enumerable old V8 strings\n\n  var indexedObject = fails(function () {\n    // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n    // eslint-disable-next-line no-prototype-builtins\n    return !Object('z').propertyIsEnumerable(0);\n  }) ? function (it) {\n    return classofRaw(it) == 'String' ? split.call(it, '') : Object(it);\n  } : Object;\n\n  // `RequireObjectCoercible` abstract operation\n  // https://tc39.github.io/ecma262/#sec-requireobjectcoercible\n  var requireObjectCoercible = function (it) {\n    if (it == undefined) {\n      throw TypeError('Can\\'t call method on ' + it);\n    }\n    return it;\n  };\n\n  // toObject with fallback for non-array-like ES3 strings\n\n\n  var toIndexedObject = function (it) {\n    return indexedObject(requireObjectCoercible(it));\n  };\n\n  var isObject = function (it) {\n    return typeof it === 'object' ? it !== null : typeof it === 'function';\n  };\n\n  // `ToPrimitive` abstract operation\n  // https://tc39.github.io/ecma262/#sec-toprimitive\n  // instead of the ES6 spec version, we didn't implement @@toPrimitive case\n  // and the second argument - flag - preferred type is a string\n\n\n  var toPrimitive = function (input, PREFERRED_STRING) {\n    if (!isObject(input)) {\n      return input;\n    }\n    var fn, val;\n    if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) {\n      return val;\n    }\n    throw TypeError('Can\\'t convert object to primitive value');\n  };\n\n  var hasOwnProperty = {}.hasOwnProperty;\n\n  var has = function (it, key) {\n    return hasOwnProperty.call(it, key);\n  };\n\n  var document$1 = global_1.document; // typeof document.createElement is 'object' in old IE\n\n  var EXISTS = isObject(document$1) && isObject(document$1.createElement);\n\n  var documentCreateElement = function (it) {\n    return EXISTS ? document$1.createElement(it) : {};\n  };\n\n  // Thank's IE8 for his funny defineProperty\n\n\n  var ie8DomDefine = !descriptors && !fails(function () {\n    return Object.defineProperty(documentCreateElement('div'), 'a', {\n      get: function () {\n        return 7;\n      },\n    }).a != 7;\n  });\n\n  var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor; // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n\n  var f$1 = descriptors ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n    O = toIndexedObject(O);\n    P = toPrimitive(P, true);\n    if (ie8DomDefine) {\n      try {\n        return nativeGetOwnPropertyDescriptor(O, P);\n      } catch (error) {\n        /* empty */\n      }\n    }\n    if (has(O, P)) {\n      return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O, P), O[P]);\n    }\n  };\n\n  var objectGetOwnPropertyDescriptor = {\n    f: f$1,\n  };\n\n  var anObject = function (it) {\n    if (!isObject(it)) {\n      throw TypeError(String(it) + ' is not an object');\n    }\n\n    return it;\n  };\n\n  var nativeDefineProperty = Object.defineProperty; // `Object.defineProperty` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperty\n\n  var f$2 = descriptors ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n    anObject(O);\n    P = toPrimitive(P, true);\n    anObject(Attributes);\n    if (ie8DomDefine) {\n      try {\n        return nativeDefineProperty(O, P, Attributes);\n      } catch (error) {\n        /* empty */\n      }\n    }\n    if ('get' in Attributes || 'set' in Attributes) {\n      throw TypeError('Accessors not supported');\n    }\n    if ('value' in Attributes) {\n      O[P] = Attributes.value;\n    }\n    return O;\n  };\n\n  var objectDefineProperty = {\n    f: f$2,\n  };\n\n  var hide = descriptors ? function (object, key, value) {\n    return objectDefineProperty.f(object, key, createPropertyDescriptor(1, value));\n  } : function (object, key, value) {\n    object[key] = value;\n    return object;\n  };\n\n  var setGlobal = function (key, value) {\n    try {\n      hide(global_1, key, value);\n    } catch (error) {\n      global_1[key] = value;\n    }\n\n    return value;\n  };\n\n  var shared = createCommonjsModule(function (module) {\n    var SHARED = '__core-js_shared__';\n    var store = global_1[SHARED] || setGlobal(SHARED, {});\n    (module.exports = function (key, value) {\n      return store[key] || (store[key] = value !== undefined ? value : {});\n    })('versions', []).push({\n      version: '3.1.3',\n      mode: 'global',\n      copyright: ' 2019 Denis Pushkarev (zloirock.ru)',\n    });\n  });\n\n  var functionToString = shared('native-function-to-string', Function.toString);\n\n  var WeakMap = global_1.WeakMap;\n  var nativeWeakMap = typeof WeakMap === 'function' && /native code/.test(functionToString.call(WeakMap));\n\n  var id = 0;\n  var postfix = Math.random();\n\n  var uid = function (key) {\n    return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n  };\n\n  var keys = shared('keys');\n\n  var sharedKey = function (key) {\n    return keys[key] || (keys[key] = uid(key));\n  };\n\n  var hiddenKeys = {};\n\n  var WeakMap$1 = global_1.WeakMap;\n  var set, get, has$1;\n\n  var enforce = function (it) {\n    return has$1(it) ? get(it) : set(it, {});\n  };\n\n  var getterFor = function (TYPE) {\n    return function (it) {\n      var state;\n\n      if (!isObject(it) || (state = get(it)).type !== TYPE) {\n        throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n      }\n\n      return state;\n    };\n  };\n\n  if (nativeWeakMap) {\n    var store = new WeakMap$1();\n    var wmget = store.get;\n    var wmhas = store.has;\n    var wmset = store.set;\n\n    set = function (it, metadata) {\n      wmset.call(store, it, metadata);\n      return metadata;\n    };\n\n    get = function (it) {\n      return wmget.call(store, it) || {};\n    };\n\n    has$1 = function (it) {\n      return wmhas.call(store, it);\n    };\n  } else {\n    var STATE = sharedKey('state');\n    hiddenKeys[STATE] = true;\n\n    set = function (it, metadata) {\n      hide(it, STATE, metadata);\n      return metadata;\n    };\n\n    get = function (it) {\n      return has(it, STATE) ? it[STATE] : {};\n    };\n\n    has$1 = function (it) {\n      return has(it, STATE);\n    };\n  }\n\n  var internalState = {\n    set: set,\n    get: get,\n    has: has$1,\n    enforce: enforce,\n    getterFor: getterFor,\n  };\n\n  var redefine = createCommonjsModule(function (module) {\n    var getInternalState = internalState.get;\n    var enforceInternalState = internalState.enforce;\n    var TEMPLATE = String(functionToString).split('toString');\n    shared('inspectSource', function (it) {\n      return functionToString.call(it);\n    });\n    (module.exports = function (O, key, value, options) {\n      var unsafe = options ? !!options.unsafe : false;\n      var simple = options ? !!options.enumerable : false;\n      var noTargetGet = options ? !!options.noTargetGet : false;\n\n      if (typeof value == 'function') {\n        if (typeof key == 'string' && !has(value, 'name')) {\n          hide(value, 'name', key);\n        }\n        enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n      }\n\n      if (O === global_1) {\n        if (simple) {\n          O[key] = value;\n        } else {\n          setGlobal(key, value);\n        }\n        return;\n      } else if (!unsafe) {\n        delete O[key];\n      } else if (!noTargetGet && O[key]) {\n        simple = true;\n      }\n\n      if (simple) {\n        O[key] = value;\n      } else {\n        hide(O, key, value);\n      } // add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n    })(Function.prototype, 'toString', function toString() {\n      return typeof this == 'function' && getInternalState(this).source || functionToString.call(this);\n    });\n  });\n\n  var path = global_1;\n\n  var aFunction = function (variable) {\n    return typeof variable == 'function' ? variable : undefined;\n  };\n\n  var getBuiltIn = function (namespace, method) {\n    return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global_1[namespace]) : path[namespace] && path[namespace][method] || global_1[namespace] && global_1[namespace][method];\n  };\n\n  var ceil = Math.ceil;\n  var floor = Math.floor; // `ToInteger` abstract operation\n  // https://tc39.github.io/ecma262/#sec-tointeger\n\n  var toInteger = function (argument) {\n    return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n  };\n\n  var min = Math.min; // `ToLength` abstract operation\n  // https://tc39.github.io/ecma262/#sec-tolength\n\n  var toLength = function (argument) {\n    return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n  };\n\n  var max = Math.max;\n  var min$1 = Math.min; // Helper for a popular repeating case of the spec:\n  // Let integer be ? ToInteger(index).\n  // If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\n\n  var toAbsoluteIndex = function (index, length) {\n    var integer = toInteger(index);\n    return integer < 0 ? max(integer + length, 0) : min$1(integer, length);\n  };\n\n  // `Array.prototype.{ indexOf, includes }` methods implementation\n\n\n  var createMethod = function (IS_INCLUDES) {\n    return function ($this, el, fromIndex) {\n      var O = toIndexedObject($this);\n      var length = toLength(O.length);\n      var index = toAbsoluteIndex(fromIndex, length);\n      var value; // Array#includes uses SameValueZero equality algorithm\n      // eslint-disable-next-line no-self-compare\n\n      if (IS_INCLUDES && el != el) {\n        while (length > index) {\n          value = O[index++]; // eslint-disable-next-line no-self-compare\n\n          if (value != value) {\n            return true;\n          } // Array#indexOf ignores holes, Array#includes - not\n        }\n      } else {\n        for (; length > index; index++) {\n          if ((IS_INCLUDES || index in O) && O[index] === el) {\n            return IS_INCLUDES || index || 0;\n          }\n        }\n      }\n      return !IS_INCLUDES && -1;\n    };\n  };\n\n  var arrayIncludes = {\n    // `Array.prototype.includes` method\n    // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n    includes: createMethod(true),\n    // `Array.prototype.indexOf` method\n    // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n    indexOf: createMethod(false),\n  };\n\n  var indexOf = arrayIncludes.indexOf;\n\n\n  var objectKeysInternal = function (object, names) {\n    var O = toIndexedObject(object);\n    var i = 0;\n    var result = [];\n    var key;\n\n    for (key in O) {\n      !has(hiddenKeys, key) && has(O, key) && result.push(key);\n    } // Don't enum bug & hidden keys\n\n\n    while (names.length > i) {\n      if (has(O, key = names[i++])) {\n        ~indexOf(result, key) || result.push(key);\n      }\n    }\n\n    return result;\n  };\n\n  // IE8- don't enum bug keys\n  var enumBugKeys = ['constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toLocaleString', 'toString', 'valueOf'];\n\n  var hiddenKeys$1 = enumBugKeys.concat('length', 'prototype'); // `Object.getOwnPropertyNames` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames\n\n  var f$3 = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n    return objectKeysInternal(O, hiddenKeys$1);\n  };\n\n  var objectGetOwnPropertyNames = {\n    f: f$3,\n  };\n\n  var f$4 = Object.getOwnPropertySymbols;\n\n  var objectGetOwnPropertySymbols = {\n    f: f$4,\n  };\n\n  // all object keys, includes non-enumerable and symbols\n\n\n  var ownKeys = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n    var keys = objectGetOwnPropertyNames.f(anObject(it));\n    var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;\n    return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n  };\n\n  var copyConstructorProperties = function (target, source) {\n    var keys = ownKeys(source);\n    var defineProperty = objectDefineProperty.f;\n    var getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (!has(target, key)) {\n        defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n      }\n    }\n  };\n\n  var replacement = /#|\\.prototype\\./;\n\n  var isForced = function (feature, detection) {\n    var value = data[normalize(feature)];\n    return value == POLYFILL ? true : value == NATIVE ? false : typeof detection == 'function' ? fails(detection) : !!detection;\n  };\n\n  var normalize = isForced.normalize = function (string) {\n    return String(string).replace(replacement, '.').toLowerCase();\n  };\n\n  var data = isForced.data = {};\n  var NATIVE = isForced.NATIVE = 'N';\n  var POLYFILL = isForced.POLYFILL = 'P';\n  var isForced_1 = isForced;\n\n  var getOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;\n\n\n  /*\n\t  options.target      - name of the target object\n\t  options.global      - target is the global object\n\t  options.stat        - export as static methods of target\n\t  options.proto       - export as prototype methods of target\n\t  options.real        - real prototype method for the `pure` version\n\t  options.forced      - export even if the native feature is available\n\t  options.bind        - bind methods to the target, required for the `pure` version\n\t  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n\t  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n\t  options.sham        - add a flag to not completely full polyfills\n\t  options.enumerable  - export as enumerable property\n\t  options.noTargetGet - prevent calling a getter on target\n\t*/\n\n\n  var _export = function (options, source) {\n    var TARGET = options.target;\n    var GLOBAL = options.global;\n    var STATIC = options.stat;\n    var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n\n    if (GLOBAL) {\n      target = global_1;\n    } else if (STATIC) {\n      target = global_1[TARGET] || setGlobal(TARGET, {});\n    } else {\n      target = (global_1[TARGET] || {}).prototype;\n    }\n\n    if (target) {\n      for (key in source) {\n        sourceProperty = source[key];\n\n        if (options.noTargetGet) {\n          descriptor = getOwnPropertyDescriptor$1(target, key);\n          targetProperty = descriptor && descriptor.value;\n        } else {\n          targetProperty = target[key];\n        }\n\n        FORCED = isForced_1(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced); // contained in target\n\n        if (!FORCED && targetProperty !== undefined) {\n          if (typeof sourceProperty === typeof targetProperty) {\n            continue;\n          }\n          copyConstructorProperties(sourceProperty, targetProperty);\n        } // add a flag to not completely full polyfills\n\n\n        if (options.sham || targetProperty && targetProperty.sham) {\n          hide(sourceProperty, 'sham', true);\n        } // extend global\n\n\n        redefine(target, key, sourceProperty, options);\n      }\n    }\n  };\n\n  // `Object.keys` method\n  // https://tc39.github.io/ecma262/#sec-object.keys\n\n\n  var objectKeys = Object.keys || function keys(O) {\n    return objectKeysInternal(O, enumBugKeys);\n  };\n\n  // `ToObject` abstract operation\n  // https://tc39.github.io/ecma262/#sec-toobject\n\n\n  var toObject = function (argument) {\n    return Object(requireObjectCoercible(argument));\n  };\n\n  var nativeAssign = Object.assign; // `Object.assign` method\n  // https://tc39.github.io/ecma262/#sec-object.assign\n  // should work with symbols and should have deterministic property order (V8 bug)\n\n  var objectAssign = !nativeAssign || fails(function () {\n    var A = {};\n    var B = {}; // eslint-disable-next-line no-undef\n\n    var symbol = Symbol();\n    var alphabet = 'abcdefghijklmnopqrst';\n    A[symbol] = 7;\n    alphabet.split('').forEach(function (chr) {\n      B[chr] = chr;\n    });\n    return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n  }) ? function assign(target, source) {\n    // eslint-disable-line no-unused-vars\n    var T = toObject(target);\n    var argumentsLength = arguments.length;\n    var index = 1;\n    var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;\n    var propertyIsEnumerable = objectPropertyIsEnumerable.f;\n\n    while (argumentsLength > index) {\n      var S = indexedObject(arguments[index++]);\n      var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n      var length = keys.length;\n      var j = 0;\n      var key;\n\n      while (length > j) {\n        key = keys[j++];\n        if (!descriptors || propertyIsEnumerable.call(S, key)) {\n          T[key] = S[key];\n        }\n      }\n    }\n\n    return T;\n  } : nativeAssign;\n\n  // `Object.assign` method\n  // https://tc39.github.io/ecma262/#sec-object.assign\n\n\n  _export({\n    target: 'Object',\n    stat: true,\n    forced: Object.assign !== objectAssign,\n  }, {\n    assign: objectAssign,\n  });\n\n  // `String.prototype.repeat` method implementation\n  // https://tc39.github.io/ecma262/#sec-string.prototype.repeat\n\n\n  var stringRepeat = ''.repeat || function repeat(count) {\n    var str = String(requireObjectCoercible(this));\n    var result = '';\n    var n = toInteger(count);\n    if (n < 0 || n == Infinity) {\n      throw RangeError('Wrong number of repetitions');\n    }\n\n    for (; n > 0; (n >>>= 1) && (str += str)) {\n      if (n & 1) {\n        result += str;\n      }\n    }\n\n    return result;\n  };\n\n  // https://github.com/tc39/proposal-string-pad-start-end\n\n\n  var ceil$1 = Math.ceil; // `String.prototype.{ padStart, padEnd }` methods implementation\n\n  var createMethod$1 = function (IS_END) {\n    return function ($this, maxLength, fillString) {\n      var S = String(requireObjectCoercible($this));\n      var stringLength = S.length;\n      var fillStr = fillString === undefined ? ' ' : String(fillString);\n      var intMaxLength = toLength(maxLength);\n      var fillLen, stringFiller;\n      if (intMaxLength <= stringLength || fillStr == '') {\n        return S;\n      }\n      fillLen = intMaxLength - stringLength;\n      stringFiller = stringRepeat.call(fillStr, ceil$1(fillLen / fillStr.length));\n      if (stringFiller.length > fillLen) {\n        stringFiller = stringFiller.slice(0, fillLen);\n      }\n      return IS_END ? S + stringFiller : stringFiller + S;\n    };\n  };\n\n  var stringPad = {\n    // `String.prototype.padStart` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n    start: createMethod$1(false),\n    // `String.prototype.padEnd` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.padend\n    end: createMethod$1(true),\n  };\n\n  var userAgent = getBuiltIn('navigator', 'userAgent') || '';\n\n  // https://github.com/zloirock/core-js/issues/280\n  // eslint-disable-next-line unicorn/no-unsafe-regex\n\n\n  var webkitStringPadBug = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n  var $padEnd = stringPad.end;\n\n  // `String.prototype.padEnd` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padend\n\n\n  _export({\n    target: 'String',\n    proto: true,\n    forced: webkitStringPadBug,\n  }, {\n    padEnd: function padEnd(maxLength\n                            /* , fillString = ' ' */\n    ) {\n      return $padEnd(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n    },\n  });\n\n  var $padStart = stringPad.start;\n\n  // `String.prototype.padStart` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n\n\n  _export({\n    target: 'String',\n    proto: true,\n    forced: webkitStringPadBug,\n  }, {\n    padStart: function padStart(maxLength\n                                /* , fillString = ' ' */\n    ) {\n      return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n    },\n  });\n\n  // `String.prototype.repeat` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.repeat\n\n\n  _export({\n    target: 'String',\n    proto: true,\n  }, {\n    repeat: stringRepeat,\n  });\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === 'function' && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) {\n        descriptor.writable = true;\n      }\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) {\n      _defineProperties(Constructor.prototype, protoProps);\n    }\n    if (staticProps) {\n      _defineProperties(Constructor, staticProps);\n    }\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true,\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true,\n      },\n    });\n    if (superClass) {\n      _setPrototypeOf(subClass, superClass);\n    }\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) {\n      return {};\n    }\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) {\n        continue;\n      }\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) {\n      return {};\n    }\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) {\n          continue;\n        }\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) {\n          continue;\n        }\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) {\n        break;\n      }\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) {\n          return;\n        }\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set$1(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set$1 = Reflect.set;\n    } else {\n      set$1 = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set$1(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set$1(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) {\n      return arr;\n    }\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) {\n          break;\n        }\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) {\n          _i['return']();\n        }\n      } finally {\n        if (_d) {\n          throw _e;\n        }\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  /** Checks if value is string */\n  function isString(str) {\n    return typeof str === 'string' || str instanceof String;\n  }\n\n  /**\n   Direction\n   @prop {string} NONE\n   @prop {string} LEFT\n   @prop {string} FORCE_LEFT\n   @prop {string} RIGHT\n   @prop {string} FORCE_RIGHT\n   */\n\n  var DIRECTION = {\n    NONE: 'NONE',\n    LEFT: 'LEFT',\n    FORCE_LEFT: 'FORCE_LEFT',\n    RIGHT: 'RIGHT',\n    FORCE_RIGHT: 'FORCE_RIGHT',\n    /**\n     Direction\n     @enum {string}\n     */\n\n  };\n\n  /** */\n\n  function forceDirection(direction) {\n    switch (direction) {\n      case DIRECTION.LEFT:\n        return DIRECTION.FORCE_LEFT;\n\n      case DIRECTION.RIGHT:\n        return DIRECTION.FORCE_RIGHT;\n\n      default:\n        return direction;\n    }\n  }\n\n  /** Escapes regular expression control chars */\n\n  function escapeRegExp(str) {\n    return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n  } // cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\n\n  function objectIncludes(b, a) {\n    if (a === b) {\n      return true;\n    }\n    var arrA = Array.isArray(a),\n      arrB = Array.isArray(b),\n      i;\n\n    if (arrA && arrB) {\n      if (a.length != b.length) {\n        return false;\n      }\n\n      for (i = 0; i < a.length; i++) {\n        if (!objectIncludes(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (arrA != arrB) {\n      return false;\n    }\n\n    if (a && b && _typeof(a) === 'object' && _typeof(b) === 'object') {\n      var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n      if (dateA && dateB) {\n        return a.getTime() == b.getTime();\n      }\n      if (dateA != dateB) {\n        return false;\n      }\n      var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n      if (regexpA && regexpB) {\n        return a.toString() == b.toString();\n      }\n      if (regexpA != regexpB) {\n        return false;\n      }\n      var keys = Object.keys(a); // if (keys.length !== Object.keys(b).length) return false;\n\n      for (i = 0; i < keys.length; i++) {\n        if (!Object.prototype.hasOwnProperty.call(b, keys[i])) {\n          return false;\n        }\n      }\n\n      for (i = 0; i < keys.length; i++) {\n        if (!objectIncludes(b[keys[i]], a[keys[i]])) {\n          return false;\n        }\n      }\n\n      return true;\n    } else if (a && b && typeof a === 'function' && typeof b === 'function') {\n      return a.toString() === b.toString();\n    }\n\n    return false;\n  }\n\n  /* eslint-disable no-undef */\n\n  var g = typeof window !== 'undefined' && window || typeof global !== 'undefined' && global.global === global && global || typeof self !== 'undefined' && self.self === self && self || {};\n  /* eslint-enable no-undef */\n\n  /** Selection range */\n\n  /** Provides details of changing input */\n\n  var ActionDetails =\n    /*#__PURE__*/\n    function () {\n      /** Current input value */\n\n      /** Current cursor position */\n\n      /** Old input value */\n\n      /** Old selection */\n      function ActionDetails(value, cursorPos, oldValue, oldSelection) {\n        _classCallCheck(this, ActionDetails);\n\n        this.value = value;\n        this.cursorPos = cursorPos;\n        this.oldValue = oldValue;\n        this.oldSelection = oldSelection; // double check if left part was changed (autofilling, other non-standard input triggers)\n\n        while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\n          --this.oldSelection.start;\n        }\n      }\n\n      /**\n       Start changing position\n       @readonly\n       */\n\n\n      _createClass(ActionDetails, [{\n        key: 'startChangePos',\n        get: function get() {\n          return Math.min(this.cursorPos, this.oldSelection.start);\n        },\n        /**\n         Inserted symbols count\n         @readonly\n         */\n\n      }, {\n        key: 'insertedCount',\n        get: function get() {\n          return this.cursorPos - this.startChangePos;\n        },\n        /**\n         Inserted symbols\n         @readonly\n         */\n\n      }, {\n        key: 'inserted',\n        get: function get() {\n          return this.value.substr(this.startChangePos, this.insertedCount);\n        },\n        /**\n         Removed symbols count\n         @readonly\n         */\n\n      }, {\n        key: 'removedCount',\n        get: function get() {\n          // Math.max for opposite operation\n          return Math.max(this.oldSelection.end - this.startChangePos || // for Delete\n            this.oldValue.length - this.value.length, 0);\n        },\n        /**\n         Removed symbols\n         @readonly\n         */\n\n      }, {\n        key: 'removed',\n        get: function get() {\n          return this.oldValue.substr(this.startChangePos, this.removedCount);\n        },\n        /**\n         Unchanged head symbols\n         @readonly\n         */\n\n      }, {\n        key: 'head',\n        get: function get() {\n          return this.value.substring(0, this.startChangePos);\n        },\n        /**\n         Unchanged tail symbols\n         @readonly\n         */\n\n      }, {\n        key: 'tail',\n        get: function get() {\n          return this.value.substring(this.startChangePos + this.insertedCount);\n        },\n        /**\n         Remove direction\n         @readonly\n         */\n\n      }, {\n        key: 'removeDirection',\n        get: function get() {\n          if (!this.removedCount || this.insertedCount) {\n            return DIRECTION.NONE;\n          } // align right if delete at right or if range removed (event with backspace)\n\n          return this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos ? DIRECTION.RIGHT : DIRECTION.LEFT;\n        },\n      }]);\n\n      return ActionDetails;\n    }();\n\n  /**\n   Provides details of changing model value\n   @param {Object} [details]\n   @param {string} [details.inserted] - Inserted symbols\n   @param {boolean} [details.skip] - Can skip chars\n   @param {number} [details.removeCount] - Removed symbols count\n   @param {number} [details.tailShift] - Additional offset if any changes occurred before tail\n   */\n  var ChangeDetails =\n    /*#__PURE__*/\n    function () {\n      /** Inserted symbols */\n\n      /** Can skip chars */\n\n      /** Additional offset if any changes occurred before tail */\n\n      /** Raw inserted is used by dynamic mask */\n      function ChangeDetails(details) {\n        _classCallCheck(this, ChangeDetails);\n\n        Object.assign(this, {\n          inserted: '',\n          rawInserted: '',\n          skip: false,\n          tailShift: 0,\n        }, details);\n      }\n\n      /**\n       Aggregate changes\n       @returns {ChangeDetails} `this`\n       */\n\n\n      _createClass(ChangeDetails, [{\n        key: 'aggregate',\n        value: function aggregate(details) {\n          this.rawInserted += details.rawInserted;\n          this.skip = this.skip || details.skip;\n          this.inserted += details.inserted;\n          this.tailShift += details.tailShift;\n          return this;\n        },\n        /** Total offset considering all changes */\n\n      }, {\n        key: 'offset',\n        get: function get() {\n          return this.tailShift + this.inserted.length;\n        },\n      }]);\n\n      return ChangeDetails;\n    }();\n\n  /** Provides details of continuous extracted tail */\n  var ContinuousTailDetails =\n    /*#__PURE__*/\n    function () {\n      /** Tail value as string */\n\n      /** Tail start position */\n\n      /** Start position */\n      function ContinuousTailDetails() {\n        var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var stop = arguments.length > 2 ? arguments[2] : undefined;\n\n        _classCallCheck(this, ContinuousTailDetails);\n\n        this.value = value;\n        this.from = from;\n        this.stop = stop;\n      }\n\n      _createClass(ContinuousTailDetails, [{\n        key: 'toString',\n        value: function toString() {\n          return this.value;\n        },\n      }, {\n        key: 'extend',\n        value: function extend(tail) {\n          this.value += String(tail);\n        },\n      }, {\n        key: 'appendTo',\n        value: function appendTo(masked) {\n          return masked.append(this.toString(), {\n            tail: true,\n          }).aggregate(masked._appendPlaceholder());\n        },\n      }, {\n        key: 'shiftBefore',\n        value: function shiftBefore(pos) {\n          if (this.from >= pos || !this.value.length) {\n            return '';\n          }\n          var shiftChar = this.value[0];\n          this.value = this.value.slice(1);\n          return shiftChar;\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return {\n            value: this.value,\n            from: this.from,\n            stop: this.stop,\n          };\n        },\n        set: function set(state) {\n          Object.assign(this, state);\n        },\n      }]);\n\n      return ContinuousTailDetails;\n    }();\n\n  /** Provides common masking stuff */\n  var Masked =\n    /*#__PURE__*/\n    function () {\n      // $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773\n\n      /** @type {Mask} */\n\n      /** */\n      // $FlowFixMe no ideas\n\n      /** Transforms value before mask processing */\n\n      /** Validates if value is acceptable */\n\n      /** Does additional processing in the end of editing */\n\n      /** Enable characters overwriting */\n\n      /** */\n      function Masked(opts) {\n        _classCallCheck(this, Masked);\n\n        this._value = '';\n\n        this._update(opts);\n\n        this.isInitialized = true;\n      }\n\n      /** Sets and applies new options */\n\n\n      _createClass(Masked, [{\n        key: 'updateOptions',\n        value: function updateOptions(opts) {\n          if (!Object.keys(opts).length) {\n            return;\n          }\n          this.withValueRefresh(this._update.bind(this, opts));\n        },\n        /**\n         Sets new options\n         @protected\n         */\n\n      }, {\n        key: '_update',\n        value: function _update(opts) {\n          Object.assign(this, opts);\n        },\n        /** Mask state */\n\n      }, {\n        key: 'reset',\n\n        /** Resets value */\n        value: function reset() {\n          this._value = '';\n        },\n        /** */\n\n      }, {\n        key: 'resolve',\n\n        /** Resolve new value */\n        value: function resolve(value) {\n          this.reset();\n          this.append(value, {\n            input: true,\n          }, '');\n          this.doCommit();\n          return this.value;\n        },\n        /** */\n\n      }, {\n        key: 'nearestInputPos',\n\n        /** Finds nearest input position in direction */\n        value: function nearestInputPos(cursorPos, direction) {\n          return cursorPos;\n        },\n        /** Extracts value in range considering flags */\n\n      }, {\n        key: 'extractInput',\n        value: function extractInput() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          return this.value.slice(fromPos, toPos);\n        },\n        /** Extracts tail in range */\n\n      }, {\n        key: 'extractTail',\n        value: function extractTail() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\n        },\n        /** Appends tail */\n        // $FlowFixMe no ideas\n\n      }, {\n        key: 'appendTail',\n        value: function appendTail(tail) {\n          if (isString(tail)) {\n            tail = new ContinuousTailDetails(String(tail));\n          }\n          return tail.appendTo(this);\n        },\n        /** Appends char */\n\n      }, {\n        key: '_appendCharRaw',\n        value: function _appendCharRaw(ch) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          ch = this.doPrepare(ch, flags);\n          if (!ch) {\n            return new ChangeDetails();\n          }\n          this._value += ch;\n          return new ChangeDetails({\n            inserted: ch,\n            rawInserted: ch,\n          });\n        },\n        /** Appends char */\n\n      }, {\n        key: '_appendChar',\n        value: function _appendChar(ch) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var checkTail = arguments.length > 2 ? arguments[2] : undefined;\n          var consistentState = this.state;\n\n          var details = this._appendCharRaw(ch, flags);\n\n          if (details.inserted) {\n            var consistentTail;\n            var appended = this.doValidate(flags) !== false;\n\n            if (appended && checkTail != null) {\n              // validation ok, check tail\n              var beforeTailState = this.state;\n\n              if (this.overwrite) {\n                consistentTail = checkTail.state;\n                checkTail.shiftBefore(this.value.length);\n              }\n\n              var tailDetails = this.appendTail(checkTail);\n              appended = tailDetails.rawInserted === checkTail.toString(); // if ok, rollback state after tail\n\n              if (appended && tailDetails.inserted) {\n                this.state = beforeTailState;\n              }\n            } // revert all if something went wrong\n\n\n            if (!appended) {\n              details.rawInserted = details.inserted = '';\n              this.state = consistentState;\n              if (checkTail && consistentTail) {\n                checkTail.state = consistentTail;\n              }\n            }\n          }\n\n          return details;\n        },\n        /** Appends optional placeholder at end */\n\n      }, {\n        key: '_appendPlaceholder',\n        value: function _appendPlaceholder() {\n          return new ChangeDetails();\n        },\n        /** Appends symbols considering flags */\n        // $FlowFixMe no ideas\n\n      }, {\n        key: 'append',\n        value: function append(str, flags, tail) {\n          if (!isString(str)) {\n            throw new Error('value should be string');\n          }\n          var details = new ChangeDetails();\n          var checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\n          if (flags.tail) {\n            flags._beforeTailState = this.state;\n          }\n\n          for (var ci = 0; ci < str.length; ++ci) {\n            details.aggregate(this._appendChar(str[ci], flags, checkTail));\n          } // append tail but aggregate only tailShift\n\n\n          if (checkTail != null) {\n            details.tailShift += this.appendTail(checkTail).tailShift; // TODO it's a good idea to clear state after appending ends\n            // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\n            // this._resetBeforeTailState();\n          }\n\n          return details;\n        },\n        /** */\n\n      }, {\n        key: 'remove',\n        value: function remove() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          this._value = this.value.slice(0, fromPos) + this.value.slice(toPos);\n          return new ChangeDetails();\n        },\n        /** Calls function and reapplies current value */\n\n      }, {\n        key: 'withValueRefresh',\n        value: function withValueRefresh(fn) {\n          if (this._refreshing || !this.isInitialized) {\n            return fn();\n          }\n          this._refreshing = true;\n          var unmasked = this.unmaskedValue;\n          var value = this.value;\n          var ret = fn(); // try to update with raw value first to keep fixed chars\n\n          if (this.resolve(value) !== value) {\n            // or fallback to unmasked\n            this.unmaskedValue = unmasked;\n          }\n\n          delete this._refreshing;\n          return ret;\n        },\n        /**\n         Prepares string before mask processing\n         @protected\n         */\n\n      }, {\n        key: 'doPrepare',\n        value: function doPrepare(str) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return this.prepare ? this.prepare(str, this, flags) : str;\n        },\n        /**\n         Validates if value is acceptable\n         @protected\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate(flags) {\n          return (!this.validate || this.validate(this.value, this, flags)) && (!this.parent || this.parent.doValidate(flags));\n        },\n        /**\n         Does additional processing in the end of editing\n         @protected\n         */\n\n      }, {\n        key: 'doCommit',\n        value: function doCommit() {\n          if (this.commit) {\n            this.commit(this.value, this);\n          }\n        },\n        /** */\n\n      }, {\n        key: 'splice',\n        value: function splice(start, deleteCount, inserted, removeDirection) {\n          var tailPos = start + deleteCount;\n          var tail = this.extractTail(tailPos);\n          var startChangePos = this.nearestInputPos(start, removeDirection);\n          var changeDetails = new ChangeDetails({\n            tailShift: startChangePos - start, // adjust tailShift if start was aligned\n\n          }).aggregate(this.remove(startChangePos)).aggregate(this.append(inserted, {\n            input: true,\n          }, tail));\n          return changeDetails;\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return {\n            _value: this.value,\n          };\n        },\n        set: function set(state) {\n          this._value = state._value;\n        },\n      }, {\n        key: 'value',\n        get: function get() {\n          return this._value;\n        },\n        set: function set(value) {\n          this.resolve(value);\n        },\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this.value;\n        },\n        set: function set(value) {\n          this.reset();\n          this.append(value, {}, '');\n          this.doCommit();\n        },\n        /** */\n\n      }, {\n        key: 'typedValue',\n        get: function get() {\n          return this.unmaskedValue;\n        },\n        set: function set(value) {\n          this.unmaskedValue = value;\n        },\n        /** Value that includes raw user input */\n\n      }, {\n        key: 'rawInputValue',\n        get: function get() {\n          return this.extractInput(0, this.value.length, {\n            raw: true,\n          });\n        },\n        set: function set(value) {\n          this.reset();\n          this.append(value, {\n            raw: true,\n          }, '');\n          this.doCommit();\n        },\n        /** */\n\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return true;\n        },\n      }]);\n\n      return Masked;\n    }();\n\n  /** Get Masked class by mask type */\n  function maskedClass(mask) {\n    if (mask == null) {\n      throw new Error('mask property should be defined');\n    }\n\n    if (mask instanceof RegExp) {\n      return g.IMask.MaskedRegExp;\n    }\n    if (isString(mask)) {\n      return g.IMask.MaskedPattern;\n    }\n    if (mask instanceof Date || mask === Date) {\n      return g.IMask.MaskedDate;\n    }\n    if (mask instanceof Number || typeof mask === 'number' || mask === Number) {\n      return g.IMask.MaskedNumber;\n    }\n    if (Array.isArray(mask) || mask === Array) {\n      return g.IMask.MaskedDynamic;\n    } // $FlowFixMe\n\n    if (mask.prototype instanceof g.IMask.Masked) {\n      return mask;\n    } // $FlowFixMe\n\n    if (mask instanceof Function) {\n      return g.IMask.MaskedFunction;\n    }\n    console.warn('Mask not found for mask', mask); // eslint-disable-line no-console\n\n    return g.IMask.Masked;\n  }\n\n  /** Creates new {@link Masked} depending on mask type */\n\n  function createMask(opts) {\n    opts = Object.assign({}, opts);\n    var mask = opts.mask;\n    if (mask instanceof g.IMask.Masked) {\n      return mask;\n    }\n    var MaskedClass = maskedClass(mask);\n    return new MaskedClass(opts);\n  }\n\n  var DEFAULT_INPUT_DEFINITIONS = {\n    '0': /\\d/,\n    'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,\n    // http://stackoverflow.com/a/22075070\n    '*': /./,\n  };\n  /** */\n\n  var PatternInputDefinition =\n    /*#__PURE__*/\n    function () {\n      /** */\n\n      /** */\n\n      /** */\n\n      /** */\n\n      /** */\n\n      /** */\n      function PatternInputDefinition(opts) {\n        _classCallCheck(this, PatternInputDefinition);\n\n        var mask = opts.mask,\n          blockOpts = _objectWithoutProperties(opts, ['mask']);\n\n        this.masked = createMask({\n          mask: mask,\n        });\n        Object.assign(this, blockOpts);\n      }\n\n      _createClass(PatternInputDefinition, [{\n        key: 'reset',\n        value: function reset() {\n          this._isFilled = false;\n          this.masked.reset();\n        },\n      }, {\n        key: 'remove',\n        value: function remove() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n          if (fromPos === 0 && toPos >= 1) {\n            this._isFilled = false;\n            return this.masked.remove(fromPos, toPos);\n          }\n\n          return new ChangeDetails();\n        },\n      }, {\n        key: '_appendChar',\n        value: function _appendChar(str) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (this._isFilled) {\n            return new ChangeDetails();\n          }\n          var state = this.masked.state; // simulate input\n\n          var details = this.masked._appendChar(str, flags);\n\n          if (details.inserted && this.doValidate(flags) === false) {\n            details.inserted = details.rawInserted = '';\n            this.masked.state = state;\n          }\n\n          if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\n            details.inserted = this.placeholderChar;\n          }\n\n          details.skip = !details.inserted && !this.isOptional;\n          this._isFilled = Boolean(details.inserted);\n          return details;\n        },\n      }, {\n        key: 'append',\n        value: function append() {\n          var _this$masked;\n\n          return (_this$masked = this.masked).append.apply(_this$masked, arguments);\n        },\n      }, {\n        key: '_appendPlaceholder',\n        value: function _appendPlaceholder() {\n          var details = new ChangeDetails();\n          if (this._isFilled || this.isOptional) {\n            return details;\n          }\n          this._isFilled = true;\n          details.inserted = this.placeholderChar;\n          return details;\n        },\n      }, {\n        key: 'extractTail',\n        value: function extractTail() {\n          var _this$masked2;\n\n          return (_this$masked2 = this.masked).extractTail.apply(_this$masked2, arguments);\n        },\n      }, {\n        key: 'appendTail',\n        value: function appendTail() {\n          var _this$masked3;\n\n          return (_this$masked3 = this.masked).appendTail.apply(_this$masked3, arguments);\n        },\n      }, {\n        key: 'extractInput',\n        value: function extractInput() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          var flags = arguments.length > 2 ? arguments[2] : undefined;\n          return this.masked.extractInput(fromPos, toPos, flags);\n        },\n      }, {\n        key: 'nearestInputPos',\n        value: function nearestInputPos(cursorPos) {\n          var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n          var minPos = 0;\n          var maxPos = this.value.length;\n          var boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\n\n          switch (direction) {\n            case DIRECTION.LEFT:\n            case DIRECTION.FORCE_LEFT:\n              return this.isComplete ? boundPos : minPos;\n\n            case DIRECTION.RIGHT:\n            case DIRECTION.FORCE_RIGHT:\n              return this.isComplete ? boundPos : maxPos;\n\n            case DIRECTION.NONE:\n            default:\n              return boundPos;\n          }\n        },\n      }, {\n        key: 'doValidate',\n        value: function doValidate() {\n          var _this$masked4, _this$parent;\n\n          return (_this$masked4 = this.masked).doValidate.apply(_this$masked4, arguments) && (!this.parent || (_this$parent = this.parent).doValidate.apply(_this$parent, arguments));\n        },\n      }, {\n        key: 'doCommit',\n        value: function doCommit() {\n          this.masked.doCommit();\n        },\n      }, {\n        key: 'value',\n        get: function get() {\n          return this.masked.value || (this._isFilled && !this.isOptional ? this.placeholderChar : '');\n        },\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this.masked.unmaskedValue;\n        },\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return Boolean(this.masked.value) || this.isOptional;\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return {\n            masked: this.masked.state,\n            _isFilled: this._isFilled,\n          };\n        },\n        set: function set(state) {\n          this.masked.state = state.masked;\n          this._isFilled = state._isFilled;\n        },\n      }]);\n\n      return PatternInputDefinition;\n    }();\n\n  var PatternFixedDefinition =\n    /*#__PURE__*/\n    function () {\n      /** */\n\n      /** */\n\n      /** */\n\n      /** */\n      function PatternFixedDefinition(opts) {\n        _classCallCheck(this, PatternFixedDefinition);\n\n        Object.assign(this, opts);\n        this._value = '';\n      }\n\n      _createClass(PatternFixedDefinition, [{\n        key: 'reset',\n        value: function reset() {\n          this._isRawInput = false;\n          this._value = '';\n        },\n      }, {\n        key: 'remove',\n        value: function remove() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n          this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\n          if (!this._value) {\n            this._isRawInput = false;\n          }\n          return new ChangeDetails();\n        },\n      }, {\n        key: 'nearestInputPos',\n        value: function nearestInputPos(cursorPos) {\n          var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n          var minPos = 0;\n          var maxPos = this._value.length;\n\n          switch (direction) {\n            case DIRECTION.LEFT:\n            case DIRECTION.FORCE_LEFT:\n              return minPos;\n\n            case DIRECTION.NONE:\n            case DIRECTION.RIGHT:\n            case DIRECTION.FORCE_RIGHT:\n            default:\n              return maxPos;\n          }\n        },\n      }, {\n        key: 'extractInput',\n        value: function extractInput() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._value.length;\n          var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\n        },\n      }, {\n        key: '_appendChar',\n        value: function _appendChar(str) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var details = new ChangeDetails();\n          if (this._value) {\n            return details;\n          }\n          var appended = this.char === str[0];\n          var isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && !flags.tail;\n          if (isResolved) {\n            details.rawInserted = this.char;\n          }\n          this._value = details.inserted = this.char;\n          this._isRawInput = isResolved && (flags.raw || flags.input);\n          return details;\n        },\n      }, {\n        key: '_appendPlaceholder',\n        value: function _appendPlaceholder() {\n          var details = new ChangeDetails();\n          if (this._value) {\n            return details;\n          }\n          this._value = details.inserted = this.char;\n          return details;\n        },\n      }, {\n        key: 'extractTail',\n        value: function extractTail() {\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          return new ContinuousTailDetails('');\n        }, // $FlowFixMe no ideas\n\n      }, {\n        key: 'appendTail',\n        value: function appendTail(tail) {\n          if (isString(tail)) {\n            tail = new ContinuousTailDetails(String(tail));\n          }\n          return tail.appendTo(this);\n        },\n      }, {\n        key: 'append',\n        value: function append(str, flags, tail) {\n          var details = this._appendChar(str, flags);\n\n          if (tail != null) {\n            details.tailShift += this.appendTail(tail).tailShift;\n          }\n\n          return details;\n        },\n      }, {\n        key: 'doCommit',\n        value: function doCommit() {\n        },\n      }, {\n        key: 'value',\n        get: function get() {\n          return this._value;\n        },\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this.isUnmasking ? this.value : '';\n        },\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return true;\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return {\n            _value: this._value,\n            _isRawInput: this._isRawInput,\n          };\n        },\n        set: function set(state) {\n          Object.assign(this, state);\n        },\n      }]);\n\n      return PatternFixedDefinition;\n    }();\n\n  var ChunksTailDetails =\n    /*#__PURE__*/\n    function () {\n      /** */\n      function ChunksTailDetails() {\n        var chunks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        _classCallCheck(this, ChunksTailDetails);\n\n        this.chunks = chunks;\n        this.from = from;\n      }\n\n      _createClass(ChunksTailDetails, [{\n        key: 'toString',\n        value: function toString() {\n          return this.chunks.map(String).join('');\n        }, // $FlowFixMe no ideas\n\n      }, {\n        key: 'extend',\n        value: function extend(tailChunk) {\n          if (!String(tailChunk)) {\n            return;\n          }\n          if (isString(tailChunk)) {\n            tailChunk = new ContinuousTailDetails(String(tailChunk));\n          }\n          var lastChunk = this.chunks[this.chunks.length - 1];\n          var extendLast = lastChunk && ( // if stops are same or tail has no stop\n            lastChunk.stop === tailChunk.stop || tailChunk.stop == null) && // if tail chunk goes just after last chunk\n            tailChunk.from === lastChunk.from + lastChunk.toString().length;\n\n          if (tailChunk instanceof ContinuousTailDetails) {\n            // check the ability to extend previous chunk\n            if (extendLast) {\n              // extend previous chunk\n              lastChunk.extend(tailChunk.toString());\n            } else {\n              // append new chunk\n              this.chunks.push(tailChunk);\n            }\n          } else if (tailChunk instanceof ChunksTailDetails) {\n            if (tailChunk.stop == null) {\n              // unwrap floating chunks to parent, keeping `from` pos\n              var firstTailChunk;\n\n              while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\n                firstTailChunk = tailChunk.chunks.shift();\n                firstTailChunk.from += tailChunk.from;\n                this.extend(firstTailChunk);\n              }\n            } // if tail chunk still has value\n\n\n            if (tailChunk.toString()) {\n              // if chunks contains stops, then popup stop to container\n              tailChunk.stop = tailChunk.blockIndex;\n              this.chunks.push(tailChunk);\n            }\n          }\n        },\n      }, {\n        key: 'appendTo',\n        value: function appendTo(masked) {\n          if (!(masked instanceof g.IMask.MaskedPattern)) {\n            var tail = new ContinuousTailDetails(this.toString());\n            return tail.appendTo(masked);\n          }\n\n          var details = new ChangeDetails();\n\n          for (var ci = 0; ci < this.chunks.length && !details.skip; ++ci) {\n            var chunk = this.chunks[ci];\n\n            var lastBlockIter = masked._mapPosToBlock(masked.value.length);\n\n            var stop = chunk.stop;\n            var chunkBlock = void 0;\n\n            if (stop && ( // if block not found or stop is behind lastBlock\n              !lastBlockIter || lastBlockIter.index <= stop)) {\n              if (chunk instanceof ChunksTailDetails || // for continuous block also check if stop is exist\n                masked._stops.indexOf(stop) >= 0) {\n                details.aggregate(masked._appendPlaceholder(stop));\n              }\n\n              chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\n            }\n\n            if (chunkBlock) {\n              var tailDetails = chunkBlock.appendTail(chunk);\n              tailDetails.skip = false; // always ignore skip, it will be set on last\n\n              details.aggregate(tailDetails);\n              masked._value += tailDetails.inserted; // get not inserted chars\n\n              var remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\n              if (remainChars) {\n                details.aggregate(masked.append(remainChars, {\n                  tail: true,\n                }));\n              }\n            } else {\n              details.aggregate(masked.append(chunk.toString(), {\n                tail: true,\n              }));\n            }\n          }\n          return details;\n        },\n      }, {\n        key: 'shiftBefore',\n        value: function shiftBefore(pos) {\n          if (this.from >= pos || !this.chunks.length) {\n            return '';\n          }\n          var chunkShiftPos = pos - this.from;\n          var ci = 0;\n\n          while (ci < this.chunks.length) {\n            var chunk = this.chunks[ci];\n            var shiftChar = chunk.shiftBefore(chunkShiftPos);\n\n            if (chunk.toString()) {\n              // chunk still contains value\n              // but not shifted - means no more available chars to shift\n              if (!shiftChar) {\n                break;\n              }\n              ++ci;\n            } else {\n              // clean if chunk has no value\n              this.chunks.splice(ci, 1);\n            }\n\n            if (shiftChar) {\n              return shiftChar;\n            }\n          }\n\n          return '';\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return {\n            chunks: this.chunks.map(function (c) {\n              return c.state;\n            }),\n            from: this.from,\n            stop: this.stop,\n            blockIndex: this.blockIndex,\n          };\n        },\n        set: function set(state) {\n          var chunks = state.chunks,\n            props = _objectWithoutProperties(state, ['chunks']);\n\n          Object.assign(this, props);\n          this.chunks = chunks.map(function (cstate) {\n            var chunk = 'chunks' in cstate ? new ChunksTailDetails() : new ContinuousTailDetails(); // $FlowFixMe already checked above\n\n            chunk.state = cstate;\n            return chunk;\n          });\n        },\n      }]);\n\n      return ChunksTailDetails;\n    }();\n\n  /**\n   Pattern mask\n   @param {Object} opts\n   @param {Object} opts.blocks\n   @param {Object} opts.definitions\n   @param {string} opts.placeholderChar\n   @param {boolean} opts.lazy\n   */\n  var MaskedPattern =\n    /*#__PURE__*/\n    function (_Masked) {\n      _inherits(MaskedPattern, _Masked);\n\n      /** */\n\n      /** */\n\n      /** Single char for empty input */\n\n      /** Show placeholder only when needed */\n      function MaskedPattern() {\n        var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, MaskedPattern);\n\n        // TODO type $Shape<MaskedPatternOptions>={} does not work\n        opts.definitions = Object.assign({}, DEFAULT_INPUT_DEFINITIONS, opts.definitions);\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedPattern).call(this, Object.assign({}, MaskedPattern.DEFAULTS, {}, opts)));\n      }\n\n      /**\n       @override\n       @param {Object} opts\n       */\n\n\n      _createClass(MaskedPattern, [{\n        key: '_update',\n        value: function _update() {\n          var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          opts.definitions = Object.assign({}, this.definitions, opts.definitions);\n\n          _get(_getPrototypeOf(MaskedPattern.prototype), '_update', this).call(this, opts);\n\n          this._rebuildMask();\n        },\n        /** */\n\n      }, {\n        key: '_rebuildMask',\n        value: function _rebuildMask() {\n          var _this = this;\n\n          var defs = this.definitions;\n          this._blocks = [];\n          this._stops = [];\n          this._maskedBlocks = {};\n          var pattern = this.mask;\n          if (!pattern || !defs) {\n            return;\n          }\n          var unmaskingBlock = false;\n          var optionalBlock = false;\n\n          for (var i = 0; i < pattern.length; ++i) {\n            if (this.blocks) {\n              var _ret = function () {\n                var p = pattern.slice(i);\n                var bNames = Object.keys(_this.blocks).filter(function (bName) {\n                  return p.indexOf(bName) === 0;\n                }); // order by key length\n\n                bNames.sort(function (a, b) {\n                  return b.length - a.length;\n                }); // use block name with max length\n\n                var bName = bNames[0];\n\n                if (bName) {\n                  var maskedBlock = createMask(Object.assign({\n                    parent: _this,\n                    lazy: _this.lazy,\n                    placeholderChar: _this.placeholderChar,\n                    overwrite: _this.overwrite,\n                  }, _this.blocks[bName]));\n\n                  if (maskedBlock) {\n                    _this._blocks.push(maskedBlock); // store block index\n\n\n                    if (!_this._maskedBlocks[bName]) {\n                      _this._maskedBlocks[bName] = [];\n                    }\n\n                    _this._maskedBlocks[bName].push(_this._blocks.length - 1);\n                  }\n\n                  i += bName.length - 1;\n                  return 'continue';\n                }\n              }();\n\n              if (_ret === 'continue') {\n                continue;\n              }\n            }\n\n            var char = pattern[i];\n\n            var _isInput = char in defs;\n\n            if (char === MaskedPattern.STOP_CHAR) {\n              this._stops.push(this._blocks.length);\n\n              continue;\n            }\n\n            if (char === '{' || char === '}') {\n              unmaskingBlock = !unmaskingBlock;\n              continue;\n            }\n\n            if (char === '[' || char === ']') {\n              optionalBlock = !optionalBlock;\n              continue;\n            }\n\n            if (char === MaskedPattern.ESCAPE_CHAR) {\n              ++i;\n              char = pattern[i];\n              if (!char) {\n                break;\n              }\n              _isInput = false;\n            }\n\n            var def = _isInput ? new PatternInputDefinition({\n              parent: this,\n              lazy: this.lazy,\n              placeholderChar: this.placeholderChar,\n              mask: defs[char],\n              isOptional: optionalBlock,\n            }) : new PatternFixedDefinition({\n              char: char,\n              isUnmasking: unmaskingBlock,\n            });\n\n            this._blocks.push(def);\n          }\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'reset',\n\n        /**\n         @override\n         */\n        value: function reset() {\n          _get(_getPrototypeOf(MaskedPattern.prototype), 'reset', this).call(this);\n\n          this._blocks.forEach(function (b) {\n            return b.reset();\n          });\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doCommit',\n\n        /**\n         @override\n         */\n        value: function doCommit() {\n          this._blocks.forEach(function (b) {\n            return b.doCommit();\n          });\n\n          _get(_getPrototypeOf(MaskedPattern.prototype), 'doCommit', this).call(this);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'appendTail',\n\n        /**\n         @override\n         */\n        value: function appendTail(tail) {\n          return _get(_getPrototypeOf(MaskedPattern.prototype), 'appendTail', this).call(this, tail).aggregate(this._appendPlaceholder());\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: '_appendCharRaw',\n        value: function _appendCharRaw(ch) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          ch = this.doPrepare(ch, flags);\n\n          var blockIter = this._mapPosToBlock(this.value.length);\n\n          var details = new ChangeDetails();\n          if (!blockIter) {\n            return details;\n          }\n\n          for (var bi = blockIter.index; ; ++bi) {\n            var _block = this._blocks[bi];\n            if (!_block) {\n              break;\n            }\n\n            var blockDetails = _block._appendChar(ch, flags);\n\n            var skip = blockDetails.skip;\n            details.aggregate(blockDetails);\n            if (skip || blockDetails.rawInserted) {\n              break;\n            } // go next char\n          }\n\n          return details;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'extractTail',\n        value: function extractTail() {\n          var _this2 = this;\n\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          var chunkTail = new ChunksTailDetails();\n          if (fromPos === toPos) {\n            return chunkTail;\n          }\n\n          this._forEachBlocksInRange(fromPos, toPos, function (b, bi, bFromPos, bToPos) {\n            var blockChunk = b.extractTail(bFromPos, bToPos);\n            blockChunk.stop = _this2._findStopBefore(bi);\n            blockChunk.from = _this2._blockStartPos(bi);\n            if (blockChunk instanceof ChunksTailDetails) {\n              blockChunk.blockIndex = bi;\n            }\n            chunkTail.extend(blockChunk);\n          });\n\n          return chunkTail;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'extractInput',\n        value: function extractInput() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (fromPos === toPos) {\n            return '';\n          }\n          var input = '';\n\n          this._forEachBlocksInRange(fromPos, toPos, function (b, _, fromPos, toPos) {\n            input += b.extractInput(fromPos, toPos, flags);\n          });\n\n          return input;\n        },\n      }, {\n        key: '_findStopBefore',\n        value: function _findStopBefore(blockIndex) {\n          var stopBefore;\n\n          for (var si = 0; si < this._stops.length; ++si) {\n            var stop = this._stops[si];\n            if (stop <= blockIndex) {\n              stopBefore = stop;\n            } else {\n              break;\n            }\n          }\n\n          return stopBefore;\n        },\n        /** Appends placeholder depending on laziness */\n\n      }, {\n        key: '_appendPlaceholder',\n        value: function _appendPlaceholder(toBlockIndex) {\n          var _this3 = this;\n\n          var details = new ChangeDetails();\n          if (this.lazy && toBlockIndex == null) {\n            return details;\n          }\n\n          var startBlockIter = this._mapPosToBlock(this.value.length);\n\n          if (!startBlockIter) {\n            return details;\n          }\n          var startBlockIndex = startBlockIter.index;\n          var endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\n\n          this._blocks.slice(startBlockIndex, endBlockIndex).forEach(function (b) {\n            if (!b.lazy || toBlockIndex != null) {\n              // $FlowFixMe `_blocks` may not be present\n              var args = b._blocks != null ? [b._blocks.length] : [];\n\n              var bDetails = b._appendPlaceholder.apply(b, args);\n\n              _this3._value += bDetails.inserted;\n              details.aggregate(bDetails);\n            }\n          });\n\n          return details;\n        },\n        /** Finds block in pos */\n\n      }, {\n        key: '_mapPosToBlock',\n        value: function _mapPosToBlock(pos) {\n          var accVal = '';\n\n          for (var bi = 0; bi < this._blocks.length; ++bi) {\n            var _block2 = this._blocks[bi];\n            var blockStartPos = accVal.length;\n            accVal += _block2.value;\n\n            if (pos <= accVal.length) {\n              return {\n                index: bi,\n                offset: pos - blockStartPos,\n              };\n            }\n          }\n        },\n        /** */\n\n      }, {\n        key: '_blockStartPos',\n        value: function _blockStartPos(blockIndex) {\n          return this._blocks.slice(0, blockIndex).reduce(function (pos, b) {\n            return pos += b.value.length;\n          }, 0);\n        },\n        /** */\n\n      }, {\n        key: '_forEachBlocksInRange',\n        value: function _forEachBlocksInRange(fromPos) {\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          var fn = arguments.length > 2 ? arguments[2] : undefined;\n\n          var fromBlockIter = this._mapPosToBlock(fromPos);\n\n          if (fromBlockIter) {\n            var toBlockIter = this._mapPosToBlock(toPos); // process first block\n\n\n            var isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\n            var fromBlockStartPos = fromBlockIter.offset;\n            var fromBlockEndPos = toBlockIter && isSameBlock ? toBlockIter.offset : this._blocks[fromBlockIter.index].value.length;\n            fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\n\n            if (toBlockIter && !isSameBlock) {\n              // process intermediate blocks\n              for (var bi = fromBlockIter.index + 1; bi < toBlockIter.index; ++bi) {\n                fn(this._blocks[bi], bi, 0, this._blocks[bi].value.length);\n              } // process last block\n\n\n              fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\n            }\n          }\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'remove',\n        value: function remove() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n          var removeDetails = _get(_getPrototypeOf(MaskedPattern.prototype), 'remove', this).call(this, fromPos, toPos);\n\n          this._forEachBlocksInRange(fromPos, toPos, function (b, _, bFromPos, bToPos) {\n            removeDetails.aggregate(b.remove(bFromPos, bToPos));\n          });\n\n          return removeDetails;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'nearestInputPos',\n        value: function nearestInputPos(cursorPos) {\n          var direction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DIRECTION.NONE;\n          // TODO refactor - extract alignblock\n          var beginBlockData = this._mapPosToBlock(cursorPos) || {\n            index: 0,\n            offset: 0,\n          };\n          var beginBlockOffset = beginBlockData.offset,\n            beginBlockIndex = beginBlockData.index;\n          var beginBlock = this._blocks[beginBlockIndex];\n          if (!beginBlock) {\n            return cursorPos;\n          }\n          var beginBlockCursorPos = beginBlockOffset; // if position inside block - try to adjust it\n\n          if (beginBlockCursorPos !== 0 && beginBlockCursorPos < beginBlock.value.length) {\n            beginBlockCursorPos = beginBlock.nearestInputPos(beginBlockOffset, forceDirection(direction));\n          }\n\n          var cursorAtRight = beginBlockCursorPos === beginBlock.value.length;\n          var cursorAtLeft = beginBlockCursorPos === 0; //  cursor is INSIDE first block (not at bounds)\n\n          if (!cursorAtLeft && !cursorAtRight) {\n            return this._blockStartPos(beginBlockIndex) + beginBlockCursorPos;\n          }\n          var searchBlockIndex = cursorAtRight ? beginBlockIndex + 1 : beginBlockIndex;\n\n          if (direction === DIRECTION.NONE) {\n            // NONE direction used to calculate start input position if no chars were removed\n            // FOR NONE:\n            // -\n            // input|any\n            // ->\n            //  any|input\n            // <-\n            //  filled-input|any\n            // check if first block at left is input\n            if (searchBlockIndex > 0) {\n              var blockIndexAtLeft = searchBlockIndex - 1;\n              var blockAtLeft = this._blocks[blockIndexAtLeft];\n              var blockInputPos = blockAtLeft.nearestInputPos(0, DIRECTION.NONE); // is input\n\n              if (!blockAtLeft.value.length || blockInputPos !== blockAtLeft.value.length) {\n                return this._blockStartPos(searchBlockIndex);\n              }\n            } // ->\n\n\n            var firstInputAtRight = searchBlockIndex;\n\n            for (var bi = firstInputAtRight; bi < this._blocks.length; ++bi) {\n              var blockAtRight = this._blocks[bi];\n\n              var _blockInputPos = blockAtRight.nearestInputPos(0, DIRECTION.NONE);\n\n              if (!blockAtRight.value.length || _blockInputPos !== blockAtRight.value.length) {\n                return this._blockStartPos(bi) + _blockInputPos;\n              }\n            } // <-\n            // find first non-fixed symbol\n\n\n            for (var _bi = searchBlockIndex - 1; _bi >= 0; --_bi) {\n              var _block3 = this._blocks[_bi];\n\n              var _blockInputPos2 = _block3.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n              if (!_block3.value.length || _blockInputPos2 !== _block3.value.length) {\n                return this._blockStartPos(_bi) + _block3.value.length;\n              }\n            }\n\n            return cursorPos;\n          }\n\n          if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\n            // -\n            //  any|filled-input\n            // <-\n            //  any|first not empty is not-len-aligned\n            //  not-0-aligned|any\n            // ->\n            //  any|not-len-aligned or end\n            // check if first block at right is filled input\n            var firstFilledBlockIndexAtRight;\n\n            for (var _bi2 = searchBlockIndex; _bi2 < this._blocks.length; ++_bi2) {\n              if (this._blocks[_bi2].value) {\n                firstFilledBlockIndexAtRight = _bi2;\n                break;\n              }\n            }\n\n            if (firstFilledBlockIndexAtRight != null) {\n              var filledBlock = this._blocks[firstFilledBlockIndexAtRight];\n\n              var _blockInputPos3 = filledBlock.nearestInputPos(0, DIRECTION.RIGHT);\n\n              if (_blockInputPos3 === 0 && filledBlock.unmaskedValue.length) {\n                // filled block is input\n                return this._blockStartPos(firstFilledBlockIndexAtRight) + _blockInputPos3;\n              }\n            } // <-\n            // find this vars\n\n\n            var firstFilledInputBlockIndex = -1;\n            var firstEmptyInputBlockIndex; // TODO consider nested empty inputs\n\n            for (var _bi3 = searchBlockIndex - 1; _bi3 >= 0; --_bi3) {\n              var _block4 = this._blocks[_bi3];\n\n              var _blockInputPos4 = _block4.nearestInputPos(_block4.value.length, DIRECTION.FORCE_LEFT);\n\n              if (!_block4.value || _blockInputPos4 !== 0) {\n                firstEmptyInputBlockIndex = _bi3;\n              }\n\n              if (_blockInputPos4 !== 0) {\n                if (_blockInputPos4 !== _block4.value.length) {\n                  // aligned inside block - return immediately\n                  return this._blockStartPos(_bi3) + _blockInputPos4;\n                } else {\n                  // found filled\n                  firstFilledInputBlockIndex = _bi3;\n                  break;\n                }\n              }\n            }\n\n            if (direction === DIRECTION.LEFT) {\n              // try find first empty input before start searching position only when not forced\n              for (var _bi4 = firstFilledInputBlockIndex + 1; _bi4 <= Math.min(searchBlockIndex, this._blocks.length - 1); ++_bi4) {\n                var _block5 = this._blocks[_bi4];\n\n                var _blockInputPos5 = _block5.nearestInputPos(0, DIRECTION.NONE);\n\n                var blockAlignedPos = this._blockStartPos(_bi4) + _blockInputPos5;\n\n                if (blockAlignedPos > cursorPos) {\n                  break;\n                } // if block is not lazy input\n\n                if (_blockInputPos5 !== _block5.value.length) {\n                  return blockAlignedPos;\n                }\n              }\n            } // process overflow\n\n\n            if (firstFilledInputBlockIndex >= 0) {\n              return this._blockStartPos(firstFilledInputBlockIndex) + this._blocks[firstFilledInputBlockIndex].value.length;\n            } // for lazy if has aligned left inside fixed and has came to the start - use start position\n\n\n            if (direction === DIRECTION.FORCE_LEFT || this.lazy && !this.extractInput() && !isInput(this._blocks[searchBlockIndex])) {\n              return 0;\n            }\n\n            if (firstEmptyInputBlockIndex != null) {\n              return this._blockStartPos(firstEmptyInputBlockIndex);\n            } // find first input\n\n\n            for (var _bi5 = searchBlockIndex; _bi5 < this._blocks.length; ++_bi5) {\n              var _block6 = this._blocks[_bi5];\n\n              var _blockInputPos6 = _block6.nearestInputPos(0, DIRECTION.NONE); // is input\n\n\n              if (!_block6.value.length || _blockInputPos6 !== _block6.value.length) {\n                return this._blockStartPos(_bi5) + _blockInputPos6;\n              }\n            }\n\n            return 0;\n          }\n\n          if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\n            // ->\n            //  any|not-len-aligned and filled\n            //  any|not-len-aligned\n            // <-\n            //  not-0-aligned or start|any\n            var firstInputBlockAlignedIndex;\n            var firstInputBlockAlignedPos;\n\n            for (var _bi6 = searchBlockIndex; _bi6 < this._blocks.length; ++_bi6) {\n              var _block7 = this._blocks[_bi6];\n\n              var _blockInputPos7 = _block7.nearestInputPos(0, DIRECTION.NONE);\n\n              if (_blockInputPos7 !== _block7.value.length) {\n                firstInputBlockAlignedPos = this._blockStartPos(_bi6) + _blockInputPos7;\n                firstInputBlockAlignedIndex = _bi6;\n                break;\n              }\n            }\n\n            if (firstInputBlockAlignedIndex != null && firstInputBlockAlignedPos != null) {\n              for (var _bi7 = firstInputBlockAlignedIndex; _bi7 < this._blocks.length; ++_bi7) {\n                var _block8 = this._blocks[_bi7];\n\n                var _blockInputPos8 = _block8.nearestInputPos(0, DIRECTION.FORCE_RIGHT);\n\n                if (_blockInputPos8 !== _block8.value.length) {\n                  return this._blockStartPos(_bi7) + _blockInputPos8;\n                }\n              }\n\n              return direction === DIRECTION.FORCE_RIGHT ? this.value.length : firstInputBlockAlignedPos;\n            }\n\n            for (var _bi8 = Math.min(searchBlockIndex, this._blocks.length - 1); _bi8 >= 0; --_bi8) {\n              var _block9 = this._blocks[_bi8];\n\n              var _blockInputPos9 = _block9.nearestInputPos(_block9.value.length, DIRECTION.LEFT);\n\n              if (_blockInputPos9 !== 0) {\n                var alignedPos = this._blockStartPos(_bi8) + _blockInputPos9;\n\n                if (alignedPos >= cursorPos) {\n                  return alignedPos;\n                }\n                break;\n              }\n            }\n          }\n\n          return cursorPos;\n        },\n        /** Get block by name */\n\n      }, {\n        key: 'maskedBlock',\n        value: function maskedBlock(name) {\n          return this.maskedBlocks(name)[0];\n        },\n        /** Get all blocks by name */\n\n      }, {\n        key: 'maskedBlocks',\n        value: function maskedBlocks(name) {\n          var _this4 = this;\n\n          var indices = this._maskedBlocks[name];\n          if (!indices) {\n            return [];\n          }\n          return indices.map(function (gi) {\n            return _this4._blocks[gi];\n          });\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return Object.assign({}, _get(_getPrototypeOf(MaskedPattern.prototype), 'state', this), {\n            _blocks: this._blocks.map(function (b) {\n              return b.state;\n            }),\n          });\n        },\n        set: function set(state) {\n          var _blocks = state._blocks,\n            maskedState = _objectWithoutProperties(state, ['_blocks']);\n\n          this._blocks.forEach(function (b, bi) {\n            return b.state = _blocks[bi];\n          });\n\n          _set(_getPrototypeOf(MaskedPattern.prototype), 'state', maskedState, this, true);\n        },\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return this._blocks.every(function (b) {\n            return b.isComplete;\n          });\n        },\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this._blocks.reduce(function (str, b) {\n            return str += b.unmaskedValue;\n          }, '');\n        },\n        set: function set(unmaskedValue) {\n          _set(_getPrototypeOf(MaskedPattern.prototype), 'unmaskedValue', unmaskedValue, this, true);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'value',\n        get: function get() {\n          // TODO return _value when not in change?\n          return this._blocks.reduce(function (str, b) {\n            return str += b.value;\n          }, '');\n        },\n        set: function set(value) {\n          _set(_getPrototypeOf(MaskedPattern.prototype), 'value', value, this, true);\n        },\n      }]);\n\n      return MaskedPattern;\n    }(Masked);\n  MaskedPattern.DEFAULTS = {\n    lazy: true,\n    placeholderChar: '_',\n  };\n  MaskedPattern.STOP_CHAR = '`';\n  MaskedPattern.ESCAPE_CHAR = '\\\\';\n  MaskedPattern.InputDefinition = PatternInputDefinition;\n  MaskedPattern.FixedDefinition = PatternFixedDefinition;\n\n  function isInput(block) {\n    if (!block) {\n      return false;\n    }\n    var value = block.value;\n    return !value || block.nearestInputPos(0, DIRECTION.NONE) !== value.length;\n  }\n\n  /** Pattern which accepts ranges */\n  var MaskedRange =\n    /*#__PURE__*/\n    function (_MaskedPattern) {\n      _inherits(MaskedRange, _MaskedPattern);\n\n      function MaskedRange() {\n        _classCallCheck(this, MaskedRange);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRange).apply(this, arguments));\n      }\n\n      _createClass(MaskedRange, [{\n        key: '_update',\n\n        /**\n         @override\n         */\n        value: function _update(opts) {\n          // TODO type\n          opts = Object.assign({\n            to: this.to || 0,\n            from: this.from || 0,\n          }, opts);\n          var maxLength = String(opts.to).length;\n          if (opts.maxLength != null) {\n            maxLength = Math.max(maxLength, opts.maxLength);\n          }\n          opts.maxLength = maxLength;\n          var fromStr = String(opts.from).padStart(maxLength, '0');\n          var toStr = String(opts.to).padStart(maxLength, '0');\n          var sameCharsCount = 0;\n\n          while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) {\n            ++sameCharsCount;\n          }\n\n          opts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(maxLength - sameCharsCount);\n\n          _get(_getPrototypeOf(MaskedRange.prototype), '_update', this).call(this, opts);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'boundaries',\n        value: function boundaries(str) {\n          var minstr = '';\n          var maxstr = '';\n\n          var _ref = str.match(/^(\\D*)(\\d*)(\\D*)/) || [],\n            _ref2 = _slicedToArray(_ref, 3),\n            placeholder = _ref2[1],\n            num = _ref2[2];\n\n          if (num) {\n            minstr = '0'.repeat(placeholder.length) + num;\n            maxstr = '9'.repeat(placeholder.length) + num;\n          }\n\n          minstr = minstr.padEnd(this.maxLength, '0');\n          maxstr = maxstr.padEnd(this.maxLength, '9');\n          return [minstr, maxstr];\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doPrepare',\n        value: function doPrepare(str) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          str = _get(_getPrototypeOf(MaskedRange.prototype), 'doPrepare', this).call(this, str, flags).replace(/\\D/g, '');\n          if (!this.autofix) {\n            return str;\n          }\n          var fromStr = String(this.from).padStart(this.maxLength, '0');\n          var toStr = String(this.to).padStart(this.maxLength, '0');\n          var val = this.value;\n          var prepStr = '';\n\n          for (var ci = 0; ci < str.length; ++ci) {\n            var nextVal = val + prepStr + str[ci];\n\n            var _this$boundaries = this.boundaries(nextVal),\n              _this$boundaries2 = _slicedToArray(_this$boundaries, 2),\n              minstr = _this$boundaries2[0],\n              maxstr = _this$boundaries2[1];\n\n            if (Number(maxstr) < this.from) {\n              prepStr += fromStr[nextVal.length - 1];\n            } else if (Number(minstr) > this.to) {\n              prepStr += toStr[nextVal.length - 1];\n            } else {\n              prepStr += str[ci];\n            }\n          }\n\n          return prepStr;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate() {\n          var _get2;\n\n          var str = this.value;\n          var firstNonZero = str.search(/[^0]/);\n          if (firstNonZero === -1 && str.length <= this._matchFrom) {\n            return true;\n          }\n\n          var _this$boundaries3 = this.boundaries(str),\n            _this$boundaries4 = _slicedToArray(_this$boundaries3, 2),\n            minstr = _this$boundaries4[0],\n            maxstr = _this$boundaries4[1];\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return this.from <= Number(maxstr) && Number(minstr) <= this.to && (_get2 = _get(_getPrototypeOf(MaskedRange.prototype), 'doValidate', this)).call.apply(_get2, [this].concat(args));\n        },\n      }, {\n        key: '_matchFrom',\n\n        /**\n         Optionally sets max length of pattern.\n         Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\n         */\n\n        /** Min bound */\n\n        /** Max bound */\n\n        /** */\n        get: function get() {\n          return this.maxLength - String(this.from).length;\n        },\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return _get(_getPrototypeOf(MaskedRange.prototype), 'isComplete', this) && Boolean(this.value);\n        },\n      }]);\n\n      return MaskedRange;\n    }(MaskedPattern);\n\n  /** Date mask */\n\n  var MaskedDate =\n    /*#__PURE__*/\n    function (_MaskedPattern) {\n      _inherits(MaskedDate, _MaskedPattern);\n\n      /** Parse string to Date */\n\n      /** Format Date to string */\n\n      /** Pattern mask for date according to {@link MaskedDate#format} */\n\n      /** Start date */\n\n      /** End date */\n\n      /** */\n\n      /**\n       @param {Object} opts\n       */\n      function MaskedDate(opts) {\n        _classCallCheck(this, MaskedDate);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedDate).call(this, Object.assign({}, MaskedDate.DEFAULTS, {}, opts)));\n      }\n\n      /**\n       @override\n       */\n\n\n      _createClass(MaskedDate, [{\n        key: '_update',\n        value: function _update(opts) {\n          if (opts.mask === Date) {\n            delete opts.mask;\n          }\n          if (opts.pattern) {\n            opts.mask = opts.pattern;\n          }\n          var blocks = opts.blocks;\n          opts.blocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS()); // adjust year block\n\n          if (opts.min) {\n            opts.blocks.Y.from = opts.min.getFullYear();\n          }\n          if (opts.max) {\n            opts.blocks.Y.to = opts.max.getFullYear();\n          }\n\n          if (opts.min && opts.max && opts.blocks.Y.from === opts.blocks.Y.to) {\n            opts.blocks.m.from = opts.min.getMonth() + 1;\n            opts.blocks.m.to = opts.max.getMonth() + 1;\n\n            if (opts.blocks.m.from === opts.blocks.m.to) {\n              opts.blocks.d.from = opts.min.getDate();\n              opts.blocks.d.to = opts.max.getDate();\n            }\n          }\n\n          Object.assign(opts.blocks, blocks); // add autofix\n\n          Object.keys(opts.blocks).forEach(function (bk) {\n            var b = opts.blocks[bk];\n            if (!('autofix' in b)) {\n              b.autofix = opts.autofix;\n            }\n          });\n\n          _get(_getPrototypeOf(MaskedDate.prototype), '_update', this).call(this, opts);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate() {\n          var _get2;\n\n          var date = this.date;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return (_get2 = _get(_getPrototypeOf(MaskedDate.prototype), 'doValidate', this)).call.apply(_get2, [this].concat(args)) && (!this.isComplete || this.isDateExist(this.value) && date != null && (this.min == null || this.min <= date) && (this.max == null || date <= this.max));\n        },\n        /** Checks if date is exists */\n\n      }, {\n        key: 'isDateExist',\n        value: function isDateExist(str) {\n          return this.format(this.parse(str)) === str;\n        },\n        /** Parsed Date */\n\n      }, {\n        key: 'date',\n        get: function get() {\n          return this.isComplete ? this.parse(this.value) : null;\n        },\n        set: function set(date) {\n          this.value = this.format(date);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'typedValue',\n        get: function get() {\n          return this.date;\n        },\n        set: function set(value) {\n          this.date = value;\n        },\n      }]);\n\n      return MaskedDate;\n    }(MaskedPattern);\n  MaskedDate.DEFAULTS = {\n    pattern: 'd{.}`m{.}`Y',\n    format: function format(date) {\n      var day = String(date.getDate()).padStart(2, '0');\n      var month = String(date.getMonth() + 1).padStart(2, '0');\n      var year = date.getFullYear();\n      return [day, month, year].join('.');\n    },\n    parse: function parse(str) {\n      var _str$split = str.split('.'),\n        _str$split2 = _slicedToArray(_str$split, 3),\n        day = _str$split2[0],\n        month = _str$split2[1],\n        year = _str$split2[2];\n\n      return new Date(year, month - 1, day);\n    },\n  };\n\n  MaskedDate.GET_DEFAULT_BLOCKS = function () {\n    return {\n      d: {\n        mask: MaskedRange,\n        from: 1,\n        to: 31,\n        maxLength: 2,\n      },\n      m: {\n        mask: MaskedRange,\n        from: 1,\n        to: 12,\n        maxLength: 2,\n      },\n      Y: {\n        mask: MaskedRange,\n        from: 1900,\n        to: 9999,\n      },\n    };\n  };\n\n  /**\n   Generic element API to use with mask\n   @interface\n   */\n  var MaskElement =\n    /*#__PURE__*/\n    function () {\n      function MaskElement() {\n        _classCallCheck(this, MaskElement);\n      }\n\n      _createClass(MaskElement, [{\n        key: 'select',\n\n        /** Safely sets element selection */\n        value: function select(start, end) {\n          if (start == null || end == null || start === this.selectionStart && end === this.selectionEnd) {\n            return;\n          }\n\n          try {\n            this._unsafeSelect(start, end);\n          } catch (e) {\n          }\n        },\n        /** Should be overriden in subclasses */\n\n      }, {\n        key: '_unsafeSelect',\n        value: function _unsafeSelect(start, end) {\n        },\n        /** Should be overriden in subclasses */\n\n      }, {\n        key: 'bindEvents',\n\n        /** Should be overriden in subclasses */\n        value: function bindEvents(handlers) {\n        },\n        /** Should be overriden in subclasses */\n\n      }, {\n        key: 'unbindEvents',\n        value: function unbindEvents() {\n        },\n      }, {\n        key: 'selectionStart',\n\n        /** */\n\n        /** */\n\n        /** */\n\n        /** Safely returns selection start */\n        get: function get() {\n          var start;\n\n          try {\n            start = this._unsafeSelectionStart;\n          } catch (e) {\n          }\n\n          return start != null ? start : this.value.length;\n        },\n        /** Safely returns selection end */\n\n      }, {\n        key: 'selectionEnd',\n        get: function get() {\n          var end;\n\n          try {\n            end = this._unsafeSelectionEnd;\n          } catch (e) {\n          }\n\n          return end != null ? end : this.value.length;\n        },\n      }, {\n        key: 'isActive',\n        get: function get() {\n          return false;\n        },\n      }]);\n\n      return MaskElement;\n    }();\n\n  /** Bridge between HTMLElement and {@link Masked} */\n\n  var HTMLMaskElement =\n    /*#__PURE__*/\n    function (_MaskElement) {\n      _inherits(HTMLMaskElement, _MaskElement);\n\n      /** Mapping between HTMLElement events and mask internal events */\n\n      /** HTMLElement to use mask on */\n\n      /**\n       @param {HTMLInputElement|HTMLTextAreaElement} input\n       */\n      function HTMLMaskElement(input) {\n        var _this;\n\n        _classCallCheck(this, HTMLMaskElement);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLMaskElement).call(this));\n        _this.input = input;\n        _this._handlers = {};\n        return _this;\n      }\n\n      /**\n       Is element in focus\n       @readonly\n       */\n\n\n      _createClass(HTMLMaskElement, [{\n        key: '_unsafeSelect',\n\n        /**\n         Sets HTMLElement selection\n         @override\n         */\n        value: function _unsafeSelect(start, end) {\n          this.input.setSelectionRange(start, end);\n        },\n        /**\n         HTMLElement value\n         @override\n         */\n\n      }, {\n        key: 'bindEvents',\n\n        /**\n         Binds HTMLElement events to mask internal events\n         @override\n         */\n        value: function bindEvents(handlers) {\n          var _this2 = this;\n\n          Object.keys(handlers).forEach(function (event) {\n            return _this2._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]);\n          });\n        },\n        /**\n         Unbinds HTMLElement events to mask internal events\n         @override\n         */\n\n      }, {\n        key: 'unbindEvents',\n        value: function unbindEvents() {\n          var _this3 = this;\n\n          Object.keys(this._handlers).forEach(function (event) {\n            return _this3._toggleEventHandler(event);\n          });\n        },\n        /** */\n\n      }, {\n        key: '_toggleEventHandler',\n        value: function _toggleEventHandler(event, handler) {\n          if (this._handlers[event]) {\n            this.input.removeEventListener(event, this._handlers[event]);\n            delete this._handlers[event];\n          }\n\n          if (handler) {\n            this.input.addEventListener(event, handler);\n            this._handlers[event] = handler;\n          }\n        },\n      }, {\n        key: 'isActive',\n        get: function get() {\n          return this.input === document.activeElement;\n        },\n        /**\n         Returns HTMLElement selection start\n         @override\n         */\n\n      }, {\n        key: '_unsafeSelectionStart',\n        get: function get() {\n          return this.input.selectionStart;\n        },\n        /**\n         Returns HTMLElement selection end\n         @override\n         */\n\n      }, {\n        key: '_unsafeSelectionEnd',\n        get: function get() {\n          return this.input.selectionEnd;\n        },\n      }, {\n        key: 'value',\n        get: function get() {\n          return this.input.value;\n        },\n        set: function set(value) {\n          this.input.value = value;\n        },\n      }]);\n\n      return HTMLMaskElement;\n    }(MaskElement);\n  HTMLMaskElement.EVENTS_MAP = {\n    selectionChange: 'keydown',\n    input: 'input',\n    drop: 'drop',\n    click: 'click',\n    focus: 'focus',\n    commit: 'blur',\n  };\n\n  /** Listens to element events and controls changes between element and {@link Masked} */\n\n  var InputMask =\n    /*#__PURE__*/\n    function () {\n      /**\n       View element\n       @readonly\n       */\n\n      /**\n       Internal {@link Masked} model\n       @readonly\n       */\n\n      /**\n       @param {MaskElement|HTMLInputElement|HTMLTextAreaElement} el\n       @param {Object} opts\n       */\n      function InputMask(el, opts) {\n        _classCallCheck(this, InputMask);\n\n        this.el = el instanceof MaskElement ? el : new HTMLMaskElement(el);\n        this.masked = createMask(opts);\n        this._listeners = {};\n        this._value = '';\n        this._unmaskedValue = '';\n        this._saveSelection = this._saveSelection.bind(this);\n        this._onInput = this._onInput.bind(this);\n        this._onChange = this._onChange.bind(this);\n        this._onDrop = this._onDrop.bind(this);\n        this._onFocus = this._onFocus.bind(this);\n        this.alignCursor = this.alignCursor.bind(this);\n        this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\n\n        this._bindEvents(); // refresh\n\n\n        this.updateValue();\n\n        this._onChange();\n      }\n\n      /** Read or update mask */\n\n\n      _createClass(InputMask, [{\n        key: 'maskEquals',\n        value: function maskEquals(mask) {\n          return mask == null || mask === this.masked.mask || mask === Date && this.masked instanceof MaskedDate;\n        },\n      }, {\n        key: '_bindEvents',\n\n        /**\n         Starts listening to element events\n         @protected\n         */\n        value: function _bindEvents() {\n          this.el.bindEvents({\n            selectionChange: this._saveSelection,\n            input: this._onInput,\n            drop: this._onDrop,\n            click: this.alignCursorFriendly,\n            focus: this._onFocus,\n            commit: this._onChange,\n          });\n        },\n        /**\n         Stops listening to element events\n         @protected\n         */\n\n      }, {\n        key: '_unbindEvents',\n        value: function _unbindEvents() {\n          this.el.unbindEvents();\n        },\n        /**\n         Fires custom event\n         @protected\n         */\n\n      }, {\n        key: '_fireEvent',\n        value: function _fireEvent(ev) {\n          var listeners = this._listeners[ev];\n          if (!listeners) {\n            return;\n          }\n          listeners.forEach(function (l) {\n            return l();\n          });\n        },\n        /**\n         Current selection start\n         @readonly\n         */\n\n      }, {\n        key: '_saveSelection',\n\n        /**\n         Stores current selection\n         @protected\n         */\n        value: function _saveSelection()\n          /* ev */ {\n          if (this.value !== this.el.value) {\n            console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\n          }\n\n          this._selection = {\n            start: this.selectionStart,\n            end: this.cursorPos,\n          };\n        },\n        /** Syncronizes model value from view */\n\n      }, {\n        key: 'updateValue',\n        value: function updateValue() {\n          this.masked.value = this.el.value;\n          this._value = this.masked.value;\n        },\n        /** Syncronizes view from model value, fires change events */\n\n      }, {\n        key: 'updateControl',\n        value: function updateControl() {\n          var newUnmaskedValue = this.masked.unmaskedValue;\n          var newValue = this.masked.value;\n          var isChanged = this.unmaskedValue !== newUnmaskedValue || this.value !== newValue;\n          this._unmaskedValue = newUnmaskedValue;\n          this._value = newValue;\n          if (this.el.value !== newValue) {\n            this.el.value = newValue;\n          }\n          if (isChanged) {\n            this._fireChangeEvents();\n          }\n        },\n        /** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */\n\n      }, {\n        key: 'updateOptions',\n        value: function updateOptions(opts) {\n          var mask = opts.mask,\n            restOpts = _objectWithoutProperties(opts, ['mask']);\n\n          var updateMask = !this.maskEquals(mask);\n          var updateOpts = !objectIncludes(this.masked, restOpts);\n          if (updateMask) {\n            this.mask = mask;\n          }\n          if (updateOpts) {\n            this.masked.updateOptions(restOpts);\n          }\n          if (updateMask || updateOpts) {\n            this.updateControl();\n          }\n        },\n        /** Updates cursor */\n\n      }, {\n        key: 'updateCursor',\n        value: function updateCursor(cursorPos) {\n          if (cursorPos == null) {\n            return;\n          }\n          this.cursorPos = cursorPos; // also queue change cursor for mobile browsers\n\n          this._delayUpdateCursor(cursorPos);\n        },\n        /**\n         Delays cursor update to support mobile browsers\n         @private\n         */\n\n      }, {\n        key: '_delayUpdateCursor',\n        value: function _delayUpdateCursor(cursorPos) {\n          var _this = this;\n\n          this._abortUpdateCursor();\n\n          this._changingCursorPos = cursorPos;\n          this._cursorChanging = setTimeout(function () {\n            if (!_this.el) {\n              return;\n            } // if was destroyed\n\n            _this.cursorPos = _this._changingCursorPos;\n\n            _this._abortUpdateCursor();\n          }, 10);\n        },\n        /**\n         Fires custom events\n         @protected\n         */\n\n      }, {\n        key: '_fireChangeEvents',\n        value: function _fireChangeEvents() {\n          this._fireEvent('accept');\n\n          if (this.masked.isComplete) {\n            this._fireEvent('complete');\n          }\n        },\n        /**\n         Aborts delayed cursor update\n         @private\n         */\n\n      }, {\n        key: '_abortUpdateCursor',\n        value: function _abortUpdateCursor() {\n          if (this._cursorChanging) {\n            clearTimeout(this._cursorChanging);\n            delete this._cursorChanging;\n          }\n        },\n        /** Aligns cursor to nearest available position */\n\n      }, {\n        key: 'alignCursor',\n        value: function alignCursor() {\n          this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);\n        },\n        /** Aligns cursor only if selection is empty */\n\n      }, {\n        key: 'alignCursorFriendly',\n        value: function alignCursorFriendly() {\n          if (this.selectionStart !== this.cursorPos) {\n            return;\n          } // skip if range is selected\n\n          this.alignCursor();\n        },\n        /** Adds listener on custom event */\n\n      }, {\n        key: 'on',\n        value: function on(ev, handler) {\n          if (!this._listeners[ev]) {\n            this._listeners[ev] = [];\n          }\n\n          this._listeners[ev].push(handler);\n\n          return this;\n        },\n        /** Removes custom event listener */\n\n      }, {\n        key: 'off',\n        value: function off(ev, handler) {\n          if (!this._listeners[ev]) {\n            return this;\n          }\n\n          if (!handler) {\n            delete this._listeners[ev];\n            return this;\n          }\n\n          var hIndex = this._listeners[ev].indexOf(handler);\n\n          if (hIndex >= 0) {\n            this._listeners[ev].splice(hIndex, 1);\n          }\n          return this;\n        },\n        /** Handles view input event */\n\n      }, {\n        key: '_onInput',\n        value: function _onInput() {\n          this._abortUpdateCursor(); // fix strange IE behavior\n\n\n          if (!this._selection) {\n            return this.updateValue();\n          }\n          var details = new ActionDetails( // new state\n            this.el.value, this.cursorPos, // old state\n            this.value, this._selection);\n          var oldRawValue = this.masked.rawInputValue;\n          var offset = this.masked.splice(details.startChangePos, details.removed.length, details.inserted, details.removeDirection).offset; // force align in remove direction only if no input chars were removed\n          // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\n\n          var removeDirection = oldRawValue === this.masked.rawInputValue ? details.removeDirection : DIRECTION.NONE;\n          var cursorPos = this.masked.nearestInputPos(details.startChangePos + offset, removeDirection);\n          this.updateControl();\n          this.updateCursor(cursorPos);\n        },\n        /** Handles view change event and commits model value */\n\n      }, {\n        key: '_onChange',\n        value: function _onChange() {\n          if (this.value !== this.el.value) {\n            this.updateValue();\n          }\n\n          this.masked.doCommit();\n          this.updateControl();\n\n          this._saveSelection();\n        },\n        /** Handles view drop event, prevents by default */\n\n      }, {\n        key: '_onDrop',\n        value: function _onDrop(ev) {\n          ev.preventDefault();\n          ev.stopPropagation();\n        },\n        /** Restore last selection on focus */\n\n      }, {\n        key: '_onFocus',\n        value: function _onFocus(ev) {\n          if (this.selectionStart !== this.cursorPos) {\n            return;\n          } // skip if range is selected\n\n          if (this._selection) {\n            this.cursorPos = this._selection.end;\n          }\n          this.alignCursorFriendly();\n        },\n        /** Unbind view events and removes element reference */\n\n      }, {\n        key: 'destroy',\n        value: function destroy() {\n          this._unbindEvents(); // $FlowFixMe why not do so?\n\n\n          this._listeners.length = 0;\n          delete this.el;\n        },\n      }, {\n        key: 'mask',\n        get: function get() {\n          return this.masked.mask;\n        },\n        set: function set(mask) {\n          if (this.maskEquals(mask)) {\n            return;\n          }\n\n          if (this.masked.constructor === maskedClass(mask)) {\n            this.masked.updateOptions({\n              mask: mask,\n            });\n            return;\n          }\n\n          var masked = createMask({\n            mask: mask,\n          });\n          masked.unmaskedValue = this.masked.unmaskedValue;\n          this.masked = masked;\n        },\n        /** Raw value */\n\n      }, {\n        key: 'value',\n        get: function get() {\n          return this._value;\n        },\n        set: function set(str) {\n          this.masked.value = str;\n          this.updateControl();\n          this.alignCursor();\n        },\n        /** Unmasked value */\n\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this._unmaskedValue;\n        },\n        set: function set(str) {\n          this.masked.unmaskedValue = str;\n          this.updateControl();\n          this.alignCursor();\n        },\n        /** Typed unmasked value */\n\n      }, {\n        key: 'typedValue',\n        get: function get() {\n          return this.masked.typedValue;\n        },\n        set: function set(val) {\n          this.masked.typedValue = val;\n          this.updateControl();\n          this.alignCursor();\n        },\n      }, {\n        key: 'selectionStart',\n        get: function get() {\n          return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart;\n        },\n        /** Current cursor position */\n\n      }, {\n        key: 'cursorPos',\n        get: function get() {\n          return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd;\n        },\n        set: function set(pos) {\n          if (!this.el.isActive) {\n            return;\n          }\n          this.el.select(pos, pos);\n\n          this._saveSelection();\n        },\n      }]);\n\n      return InputMask;\n    }();\n\n  /** Pattern which validates enum values */\n\n  var MaskedEnum =\n    /*#__PURE__*/\n    function (_MaskedPattern) {\n      _inherits(MaskedEnum, _MaskedPattern);\n\n      function MaskedEnum() {\n        _classCallCheck(this, MaskedEnum);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedEnum).apply(this, arguments));\n      }\n\n      _createClass(MaskedEnum, [{\n        key: '_update',\n\n        /**\n         @override\n         @param {Object} opts\n         */\n        value: function _update(opts) {\n          // TODO type\n          if (opts.enum) {\n            opts.mask = '*'.repeat(opts.enum[0].length);\n          }\n\n          _get(_getPrototypeOf(MaskedEnum.prototype), '_update', this).call(this, opts);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate() {\n          var _this = this,\n            _get2;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return this.enum.some(function (e) {\n            return e.indexOf(_this.unmaskedValue) >= 0;\n          }) && (_get2 = _get(_getPrototypeOf(MaskedEnum.prototype), 'doValidate', this)).call.apply(_get2, [this].concat(args));\n        },\n      }]);\n\n      return MaskedEnum;\n    }(MaskedPattern);\n\n  /**\n   Number mask\n   @param {Object} opts\n   @param {string} opts.radix - Single char\n   @param {string} opts.thousandsSeparator - Single char\n   @param {Array<string>} opts.mapToRadix - Array of single chars\n   @param {number} opts.min\n   @param {number} opts.max\n   @param {number} opts.scale - Digits after point\n   @param {boolean} opts.signed - Allow negative\n   @param {boolean} opts.normalizeZeros - Flag to remove leading and trailing zeros in the end of editing\n   @param {boolean} opts.padFractionalZeros - Flag to pad trailing zeros after point in the end of editing\n   */\n  var MaskedNumber =\n    /*#__PURE__*/\n    function (_Masked) {\n      _inherits(MaskedNumber, _Masked);\n\n      /** Single char */\n\n      /** Single char */\n\n      /** Array of single chars */\n\n      /** */\n\n      /** */\n\n      /** Digits after point */\n\n      /** */\n\n      /** Flag to remove leading and trailing zeros in the end of editing */\n\n      /** Flag to pad trailing zeros after point in the end of editing */\n      function MaskedNumber(opts) {\n        _classCallCheck(this, MaskedNumber);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedNumber).call(this, Object.assign({}, MaskedNumber.DEFAULTS, {}, opts)));\n      }\n\n      /**\n       @override\n       */\n\n\n      _createClass(MaskedNumber, [{\n        key: '_update',\n        value: function _update(opts) {\n          _get(_getPrototypeOf(MaskedNumber.prototype), '_update', this).call(this, opts);\n\n          this._updateRegExps();\n        },\n        /** */\n\n      }, {\n        key: '_updateRegExps',\n        value: function _updateRegExps() {\n          // use different regexp to process user input (more strict, input suffix) and tail shifting\n          var start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\n          var midInput = '(0|([1-9]+\\\\d*))?';\n          var mid = '\\\\d*';\n          var end = (this.scale ? '(' + escapeRegExp(this.radix) + '\\\\d{0,' + this.scale + '})?' : '') + '$';\n          this._numberRegExpInput = new RegExp(start + midInput + end);\n          this._numberRegExp = new RegExp(start + mid + end);\n          this._mapToRadixRegExp = new RegExp('[' + this.mapToRadix.map(escapeRegExp).join('') + ']', 'g');\n          this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\n        },\n        /** */\n\n      }, {\n        key: '_removeThousandsSeparators',\n        value: function _removeThousandsSeparators(value) {\n          return value.replace(this._thousandsSeparatorRegExp, '');\n        },\n        /** */\n\n      }, {\n        key: '_insertThousandsSeparators',\n        value: function _insertThousandsSeparators(value) {\n          // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n          var parts = value.split(this.radix);\n          parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\n          return parts.join(this.radix);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doPrepare',\n        value: function doPrepare(str) {\n          var _get2;\n\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          return (_get2 = _get(_getPrototypeOf(MaskedNumber.prototype), 'doPrepare', this)).call.apply(_get2, [this, this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp, this.radix))].concat(args));\n        },\n        /** */\n\n      }, {\n        key: '_separatorsCount',\n        value: function _separatorsCount(to) {\n          var extendOnSeparators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          var count = 0;\n\n          for (var pos = 0; pos < to; ++pos) {\n            if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\n              ++count;\n              if (extendOnSeparators) {\n                to += this.thousandsSeparator.length;\n              }\n            }\n          }\n\n          return count;\n        },\n        /** */\n\n      }, {\n        key: '_separatorsCountFromSlice',\n        value: function _separatorsCountFromSlice() {\n          var slice = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._value;\n          return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'extractInput',\n        value: function extractInput() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n          var flags = arguments.length > 2 ? arguments[2] : undefined;\n\n          var _this$_adjustRangeWit = this._adjustRangeWithSeparators(fromPos, toPos);\n\n          var _this$_adjustRangeWit2 = _slicedToArray(_this$_adjustRangeWit, 2);\n\n          fromPos = _this$_adjustRangeWit2[0];\n          toPos = _this$_adjustRangeWit2[1];\n          return this._removeThousandsSeparators(_get(_getPrototypeOf(MaskedNumber.prototype), 'extractInput', this).call(this, fromPos, toPos, flags));\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: '_appendCharRaw',\n        value: function _appendCharRaw(ch) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (!this.thousandsSeparator) {\n            return _get(_getPrototypeOf(MaskedNumber.prototype), '_appendCharRaw', this).call(this, ch, flags);\n          }\n          var prevBeforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n\n          var prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\n\n          this._value = this._removeThousandsSeparators(this.value);\n\n          var appendDetails = _get(_getPrototypeOf(MaskedNumber.prototype), '_appendCharRaw', this).call(this, ch, flags);\n\n          this._value = this._insertThousandsSeparators(this._value);\n          var beforeTailValue = flags.tail && flags._beforeTailState ? flags._beforeTailState._value : this._value;\n\n          var beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\n\n          appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\n          return appendDetails;\n        },\n        /** */\n\n      }, {\n        key: '_findSeparatorAround',\n        value: function _findSeparatorAround(pos) {\n          if (this.thousandsSeparator) {\n            var searchFrom = pos - this.thousandsSeparator.length + 1;\n            var separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\n            if (separatorPos <= pos) {\n              return separatorPos;\n            }\n          }\n\n          return -1;\n        },\n      }, {\n        key: '_adjustRangeWithSeparators',\n        value: function _adjustRangeWithSeparators(from, to) {\n          var separatorAroundFromPos = this._findSeparatorAround(from);\n\n          if (separatorAroundFromPos >= 0) {\n            from = separatorAroundFromPos;\n          }\n\n          var separatorAroundToPos = this._findSeparatorAround(to);\n\n          if (separatorAroundToPos >= 0) {\n            to = separatorAroundToPos + this.thousandsSeparator.length;\n          }\n          return [from, to];\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'remove',\n        value: function remove() {\n          var fromPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var toPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.value.length;\n\n          var _this$_adjustRangeWit3 = this._adjustRangeWithSeparators(fromPos, toPos);\n\n          var _this$_adjustRangeWit4 = _slicedToArray(_this$_adjustRangeWit3, 2);\n\n          fromPos = _this$_adjustRangeWit4[0];\n          toPos = _this$_adjustRangeWit4[1];\n          var valueBeforePos = this.value.slice(0, fromPos);\n          var valueAfterPos = this.value.slice(toPos);\n\n          var prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\n\n          this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\n\n          var beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\n\n          return new ChangeDetails({\n            tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length,\n          });\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'nearestInputPos',\n        value: function nearestInputPos(cursorPos, direction) {\n          if (!this.thousandsSeparator) {\n            return cursorPos;\n          }\n\n          switch (direction) {\n            case DIRECTION.NONE:\n            case DIRECTION.LEFT:\n            case DIRECTION.FORCE_LEFT: {\n              var separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\n\n              if (separatorAtLeftPos >= 0) {\n                var separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\n\n                if (cursorPos < separatorAtLeftEndPos || this.value.length <= separatorAtLeftEndPos || direction === DIRECTION.FORCE_LEFT) {\n                  return separatorAtLeftPos;\n                }\n              }\n\n              break;\n            }\n\n            case DIRECTION.RIGHT:\n            case DIRECTION.FORCE_RIGHT: {\n              var separatorAtRightPos = this._findSeparatorAround(cursorPos);\n\n              if (separatorAtRightPos >= 0) {\n                return separatorAtRightPos + this.thousandsSeparator.length;\n              }\n            }\n          }\n\n          return cursorPos;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate(flags) {\n          var regexp = flags.input ? this._numberRegExpInput : this._numberRegExp; // validate as string\n\n          var valid = regexp.test(this._removeThousandsSeparators(this.value));\n\n          if (valid) {\n            // validate as number\n            var number = this.number;\n            valid = valid && !isNaN(number) && ( // check min bound for negative values\n              this.min == null || this.min >= 0 || this.min <= this.number) && ( // check max bound for positive values\n              this.max == null || this.max <= 0 || this.number <= this.max);\n          }\n\n          return valid && _get(_getPrototypeOf(MaskedNumber.prototype), 'doValidate', this).call(this, flags);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doCommit',\n        value: function doCommit() {\n          if (this.value) {\n            var number = this.number;\n            var validnum = number; // check bounds\n\n            if (this.min != null) {\n              validnum = Math.max(validnum, this.min);\n            }\n            if (this.max != null) {\n              validnum = Math.min(validnum, this.max);\n            }\n            if (validnum !== number) {\n              this.unmaskedValue = String(validnum);\n            }\n            var formatted = this.value;\n            if (this.normalizeZeros) {\n              formatted = this._normalizeZeros(formatted);\n            }\n            if (this.padFractionalZeros) {\n              formatted = this._padFractionalZeros(formatted);\n            }\n            this._value = formatted;\n          }\n\n          _get(_getPrototypeOf(MaskedNumber.prototype), 'doCommit', this).call(this);\n        },\n        /** */\n\n      }, {\n        key: '_normalizeZeros',\n        value: function _normalizeZeros(value) {\n          var parts = this._removeThousandsSeparators(value).split(this.radix); // remove leading zeros\n\n\n          parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, function (match, sign, zeros, num) {\n            return sign + num;\n          }); // add leading zero\n\n          if (value.length && !/\\d$/.test(parts[0])) {\n            parts[0] = parts[0] + '0';\n          }\n\n          if (parts.length > 1) {\n            parts[1] = parts[1].replace(/0*$/, ''); // remove trailing zeros\n\n            if (!parts[1].length) {\n              parts.length = 1;\n            } // remove fractional\n          }\n\n          return this._insertThousandsSeparators(parts.join(this.radix));\n        },\n        /** */\n\n      }, {\n        key: '_padFractionalZeros',\n        value: function _padFractionalZeros(value) {\n          if (!value) {\n            return value;\n          }\n          var parts = value.split(this.radix);\n          if (parts.length < 2) {\n            parts.push('');\n          }\n          parts[1] = parts[1].padEnd(this.scale, '0');\n          return parts.join(this.radix);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, '.');\n        },\n        set: function set(unmaskedValue) {\n          _set(_getPrototypeOf(MaskedNumber.prototype), 'unmaskedValue', unmaskedValue.replace('.', this.radix), this, true);\n        },\n        /** Parsed Number */\n\n      }, {\n        key: 'number',\n        get: function get() {\n          return Number(this.unmaskedValue);\n        },\n        set: function set(number) {\n          this.unmaskedValue = String(number);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'typedValue',\n        get: function get() {\n          return this.number;\n        },\n        set: function set(value) {\n          this.number = value;\n        },\n        /**\n         Is negative allowed\n         @readonly\n         */\n\n      }, {\n        key: 'allowNegative',\n        get: function get() {\n          return this.signed || this.min != null && this.min < 0 || this.max != null && this.max < 0;\n        },\n      }]);\n\n      return MaskedNumber;\n    }(Masked);\n  MaskedNumber.DEFAULTS = {\n    radix: ',',\n    thousandsSeparator: '',\n    mapToRadix: ['.'],\n    scale: 2,\n    signed: false,\n    normalizeZeros: true,\n    padFractionalZeros: false,\n  };\n\n  /** Masking by RegExp */\n\n  var MaskedRegExp =\n    /*#__PURE__*/\n    function (_Masked) {\n      _inherits(MaskedRegExp, _Masked);\n\n      function MaskedRegExp() {\n        _classCallCheck(this, MaskedRegExp);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedRegExp).apply(this, arguments));\n      }\n\n      _createClass(MaskedRegExp, [{\n        key: '_update',\n\n        /**\n         @override\n         @param {Object} opts\n         */\n        value: function _update(opts) {\n          if (opts.mask) {\n            opts.validate = function (value) {\n              return value.search(opts.mask) >= 0;\n            };\n          }\n\n          _get(_getPrototypeOf(MaskedRegExp.prototype), '_update', this).call(this, opts);\n        },\n      }]);\n\n      return MaskedRegExp;\n    }(Masked);\n\n  /** Masking by custom Function */\n\n  var MaskedFunction =\n    /*#__PURE__*/\n    function (_Masked) {\n      _inherits(MaskedFunction, _Masked);\n\n      function MaskedFunction() {\n        _classCallCheck(this, MaskedFunction);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(MaskedFunction).apply(this, arguments));\n      }\n\n      _createClass(MaskedFunction, [{\n        key: '_update',\n\n        /**\n         @override\n         @param {Object} opts\n         */\n        value: function _update(opts) {\n          if (opts.mask) {\n            opts.validate = opts.mask;\n          }\n\n          _get(_getPrototypeOf(MaskedFunction.prototype), '_update', this).call(this, opts);\n        },\n      }]);\n\n      return MaskedFunction;\n    }(Masked);\n\n  /** Dynamic mask for choosing apropriate mask in run-time */\n  var MaskedDynamic =\n    /*#__PURE__*/\n    function (_Masked) {\n      _inherits(MaskedDynamic, _Masked);\n\n      /** Currently chosen mask */\n\n      /** Compliled {@link Masked} options */\n\n      /** Chooses {@link Masked} depending on input value */\n\n      /**\n       @param {Object} opts\n       */\n      function MaskedDynamic(opts) {\n        var _this;\n\n        _classCallCheck(this, MaskedDynamic);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MaskedDynamic).call(this, Object.assign({}, MaskedDynamic.DEFAULTS, {}, opts)));\n        _this.currentMask = null;\n        return _this;\n      }\n\n      /**\n       @override\n       */\n\n\n      _createClass(MaskedDynamic, [{\n        key: '_update',\n        value: function _update(opts) {\n          _get(_getPrototypeOf(MaskedDynamic.prototype), '_update', this).call(this, opts);\n\n          if ('mask' in opts) {\n            // mask could be totally dynamic with only `dispatch` option\n            this.compiledMasks = Array.isArray(opts.mask) ? opts.mask.map(function (m) {\n              return createMask(m);\n            }) : [];\n          }\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: '_appendCharRaw',\n        value: function _appendCharRaw() {\n          var details = this._applyDispatch.apply(this, arguments);\n\n          if (this.currentMask) {\n            var _this$currentMask;\n\n            details.aggregate((_this$currentMask = this.currentMask)._appendChar.apply(_this$currentMask, arguments));\n          }\n\n          return details;\n        },\n      }, {\n        key: '_applyDispatch',\n        value: function _applyDispatch() {\n          var appended = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var prevValueBeforeTail = flags.tail && flags._beforeTailState != null ? flags._beforeTailState._value : this.value;\n          var inputValue = this.rawInputValue;\n          var insertValue = flags.tail && flags._beforeTailState != null ? // $FlowFixMe - tired to fight with type system\n            flags._beforeTailState._rawInputValue : inputValue;\n          var tailValue = inputValue.slice(insertValue.length);\n          var prevMask = this.currentMask;\n          var details = new ChangeDetails();\n          var prevMaskState = prevMask && prevMask.state; // clone flags to prevent overwriting `_beforeTailState`\n\n          this.currentMask = this.doDispatch(appended, Object.assign({}, flags)); // restore state after dispatch\n\n          if (this.currentMask) {\n            if (this.currentMask !== prevMask) {\n              // if mask changed reapply input\n              this.currentMask.reset(); // $FlowFixMe - it's ok, we don't change current mask above\n\n              var d = this.currentMask.append(insertValue, {\n                raw: true,\n              });\n              details.tailShift = d.inserted.length - prevValueBeforeTail.length;\n\n              if (tailValue) {\n                // $FlowFixMe - it's ok, we don't change current mask above\n                details.tailShift += this.currentMask.append(tailValue, {\n                  raw: true,\n                  tail: true,\n                }).tailShift;\n              }\n            } else {\n              // Dispatch can do something bad with state, so\n              // restore prev mask state\n              this.currentMask.state = prevMaskState;\n            }\n          }\n\n          return details;\n        },\n      }, {\n        key: '_appendPlaceholder',\n        value: function _appendPlaceholder() {\n          var details = this._applyDispatch.apply(this, arguments);\n\n          if (this.currentMask) {\n            details.aggregate(this.currentMask._appendPlaceholder());\n          }\n\n          return details;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doDispatch',\n        value: function doDispatch(appended) {\n          var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return this.dispatch(appended, this, flags);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doValidate',\n        value: function doValidate() {\n          var _get2, _this$currentMask2;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return (_get2 = _get(_getPrototypeOf(MaskedDynamic.prototype), 'doValidate', this)).call.apply(_get2, [this].concat(args)) && (!this.currentMask || (_this$currentMask2 = this.currentMask).doValidate.apply(_this$currentMask2, args));\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'reset',\n        value: function reset() {\n          if (this.currentMask) {\n            this.currentMask.reset();\n          }\n          this.compiledMasks.forEach(function (m) {\n            return m.reset();\n          });\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'remove',\n\n        /**\n         @override\n         */\n        value: function remove() {\n          var details = new ChangeDetails();\n\n          if (this.currentMask) {\n            var _this$currentMask3;\n\n            details.aggregate((_this$currentMask3 = this.currentMask).remove.apply(_this$currentMask3, arguments)) // update with dispatch\n              .aggregate(this._applyDispatch());\n          }\n\n          return details;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'extractInput',\n\n        /**\n         @override\n         */\n        value: function extractInput() {\n          var _this$currentMask4;\n\n          return this.currentMask ? (_this$currentMask4 = this.currentMask).extractInput.apply(_this$currentMask4, arguments) : '';\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'extractTail',\n        value: function extractTail() {\n          var _this$currentMask5, _get3;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return this.currentMask ? (_this$currentMask5 = this.currentMask).extractTail.apply(_this$currentMask5, args) : (_get3 = _get(_getPrototypeOf(MaskedDynamic.prototype), 'extractTail', this)).call.apply(_get3, [this].concat(args));\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'doCommit',\n        value: function doCommit() {\n          if (this.currentMask) {\n            this.currentMask.doCommit();\n          }\n\n          _get(_getPrototypeOf(MaskedDynamic.prototype), 'doCommit', this).call(this);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'nearestInputPos',\n        value: function nearestInputPos() {\n          var _this$currentMask6, _get4;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          return this.currentMask ? (_this$currentMask6 = this.currentMask).nearestInputPos.apply(_this$currentMask6, args) : (_get4 = _get(_getPrototypeOf(MaskedDynamic.prototype), 'nearestInputPos', this)).call.apply(_get4, [this].concat(args));\n        },\n      }, {\n        key: 'value',\n        get: function get() {\n          return this.currentMask ? this.currentMask.value : '';\n        },\n        set: function set(value) {\n          _set(_getPrototypeOf(MaskedDynamic.prototype), 'value', value, this, true);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'unmaskedValue',\n        get: function get() {\n          return this.currentMask ? this.currentMask.unmaskedValue : '';\n        },\n        set: function set(unmaskedValue) {\n          _set(_getPrototypeOf(MaskedDynamic.prototype), 'unmaskedValue', unmaskedValue, this, true);\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'typedValue',\n        get: function get() {\n          return this.currentMask ? this.currentMask.typedValue : '';\n        } // probably typedValue should not be used with dynamic\n        ,\n        set: function set(value) {\n          var unmaskedValue = String(value); // double check it\n\n          if (this.currentMask) {\n            this.currentMask.typedValue = value;\n            unmaskedValue = this.currentMask.unmaskedValue;\n          }\n\n          this.unmaskedValue = unmaskedValue;\n        },\n        /**\n         @override\n         */\n\n      }, {\n        key: 'isComplete',\n        get: function get() {\n          return !!this.currentMask && this.currentMask.isComplete;\n        },\n      }, {\n        key: 'state',\n        get: function get() {\n          return Object.assign({}, _get(_getPrototypeOf(MaskedDynamic.prototype), 'state', this), {\n            _rawInputValue: this.rawInputValue,\n            compiledMasks: this.compiledMasks.map(function (m) {\n              return m.state;\n            }),\n            currentMaskRef: this.currentMask,\n            currentMask: this.currentMask && this.currentMask.state,\n          });\n        },\n        set: function set(state) {\n          var compiledMasks = state.compiledMasks,\n            currentMaskRef = state.currentMaskRef,\n            currentMask = state.currentMask,\n            maskedState = _objectWithoutProperties(state, [\"compiledMasks\", \"currentMaskRef\", \"currentMask\"]);\n\n          this.compiledMasks.forEach(function (m, mi) {\n            return m.state = compiledMasks[mi];\n          });\n\n          if (currentMaskRef != null) {\n            this.currentMask = currentMaskRef;\n            this.currentMask.state = currentMask;\n          }\n\n          _set(_getPrototypeOf(MaskedDynamic.prototype), \"state\", maskedState, this, true);\n        }\n      }, {\n        key: \"overwrite\",\n        get: function get() {\n          return this.currentMask ? this.currentMask.overwrite : _get(_getPrototypeOf(MaskedDynamic.prototype), \"overwrite\", this);\n        },\n        set: function set(overwrite) {\n          console.warn('\"overwrite\" option is not available in dynamic mask, use this option in siblings');\n        }\n      }]);\n\n      return MaskedDynamic;\n    }(Masked);\n  MaskedDynamic.DEFAULTS = {\n    dispatch: function dispatch(appended, masked, flags) {\n      if (!masked.compiledMasks.length) {\n        return;\n      }\n      var inputValue = masked.rawInputValue; // simulate input\n\n      var inputs = masked.compiledMasks.map(function (m, index) {\n        m.reset();\n        m.append(inputValue, {\n          raw: true\n        });\n        m.append(appended, flags);\n        var weight = m.rawInputValue.length;\n        return {\n          weight: weight,\n          index: index\n        };\n      }); // pop masks with longer values first\n\n      inputs.sort(function (i1, i2) {\n        return i2.weight - i1.weight;\n      });\n      return masked.compiledMasks[inputs[0].index];\n    }\n  };\n\n  /**\n   * Applies mask on element.\n   * @constructor\n   * @param {HTMLInputElement|HTMLTextAreaElement|MaskElement} el - Element to apply mask\n   * @param {Object} opts - Custom mask options\n   * @return {InputMask}\n   */\n\n  function IMask(el) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // currently available only for input-like elements\n    return new InputMask(el, opts);\n  }\n\n  /** {@link InputMask} */\n\n\n  IMask.InputMask = InputMask;\n  /** {@link Masked} */\n\n  IMask.Masked = Masked;\n  /** {@link MaskedPattern} */\n\n  IMask.MaskedPattern = MaskedPattern;\n  /** {@link MaskedEnum} */\n\n  IMask.MaskedEnum = MaskedEnum;\n  /** {@link MaskedRange} */\n\n  IMask.MaskedRange = MaskedRange;\n  /** {@link MaskedNumber} */\n\n  IMask.MaskedNumber = MaskedNumber;\n  /** {@link MaskedDate} */\n\n  IMask.MaskedDate = MaskedDate;\n  /** {@link MaskedRegExp} */\n\n  IMask.MaskedRegExp = MaskedRegExp;\n  /** {@link MaskedFunction} */\n\n  IMask.MaskedFunction = MaskedFunction;\n  /** {@link MaskedDynamic} */\n\n  IMask.MaskedDynamic = MaskedDynamic;\n  /** {@link createMask} */\n\n  IMask.createMask = createMask;\n  /** {@link MaskElement} */\n\n  IMask.MaskElement = MaskElement;\n  /** {@link HTMLMaskElement} */\n\n  IMask.HTMLMaskElement = HTMLMaskElement;\n  g.IMask = IMask;\n\n  exports.HTMLMaskElement = HTMLMaskElement;\n  exports.InputMask = InputMask;\n  exports.MaskElement = MaskElement;\n  exports.Masked = Masked;\n  exports.MaskedDate = MaskedDate;\n  exports.MaskedDynamic = MaskedDynamic;\n  exports.MaskedEnum = MaskedEnum;\n  exports.MaskedFunction = MaskedFunction;\n  exports.MaskedNumber = MaskedNumber;\n  exports.MaskedPattern = MaskedPattern;\n  exports.MaskedRange = MaskedRange;\n  exports.MaskedRegExp = MaskedRegExp;\n  exports.createMask = createMask;\n  exports.default = IMask;\n\n  Object.defineProperty(exports, '__esModule', {value: true});\n\n}));\n//# sourceMappingURL=imask.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}